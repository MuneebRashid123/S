<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookNest - Digital Library</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --purple: #9b59b6;
            --background: #f8f9fa;
            --card-bg: #ffffff;
            --text: #333333;
            --text-light: #777777;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary: #34495e;
            --secondary: #2980b9;
            --accent: #c0392b;
            --light: #2c3e50;
            --dark: #ecf0f1;
            --background: #1a2530;
            --card-bg: #2c3e50;
            --text: #ecf0f1;
            --text-light: #bdc3c7;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            transition: var(--transition);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Enhanced transitions */
        .transition-enhanced {
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .fade-in.show {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-in-left {
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }

        .slide-in-left.show {
            transform: translateX(0);
        }

        .scale-in {
            transform: scale(0.9);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .scale-in.show {
            transform: scale(1);
            opacity: 1;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), #1a2530);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .logo i {
            font-size: 2.2rem;
            color: var(--accent);
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Playfair Display', serif;
            background: linear-gradient(to right, #fff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .search-bar {
            display: flex;
            width: 40%;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border: none;
            border-radius: 30px;
            font-size: 1rem;
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            backdrop-filter: blur(10px);
        }

        .search-bar input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-bar button {
            position: absolute;
            right: 5px;
            top: 5px;
            bottom: 5px;
            width: 40px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-bar button:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .user-actions {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .user-actions a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            padding: 8px 12px;
            border-radius: 20px;
        }

        .user-actions a:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .cart-badge, .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Navigation */
        nav {
            background-color: var(--card-bg);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 70px;
            z-index: 999;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 8px 20px;
            border-radius: 20px;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--secondary);
            transition: var(--transition);
        }

        .nav-links a:hover:before, .nav-links a.active:before {
            width: 100%;
        }

        .nav-links a:hover, .nav-links a.active {
            color: var(--secondary);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(44, 62, 80, 0.85), rgba(44, 62, 80, 0.9)), url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?ixlib=rb-4.0.3') center/cover;
            color: white;
            padding: 5rem 0;
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .hero:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://images.unsplash.com/photo-1535905557558-afc4877a26fc?ixlib=rb-4.0.3') center/cover;
            opacity: 0.1;
            z-index: -1;
        }

        .hero h2 {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            font-family: 'Playfair Display', serif;
            font-weight: 700;
        }

        .hero p {
            font-size: 1.3rem;
            max-width: 700px;
            margin: 0 auto 2.5rem;
            opacity: 0.9;
        }

        .cta-button {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 14px 35px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }

        .cta-button:hover {
            background: #c0392b;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        /* Books Section */
        .section-title {
            text-align: center;
            margin: 4rem 0 3rem;
            color: var(--primary);
            position: relative;
        }

        .section-title h2 {
            font-size: 2.2rem;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .section-title p {
            color: var(--text-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(to right, var(--secondary), var(--accent));
            margin: 15px auto;
            border-radius: 2px;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 4rem;
        }

        .book-card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
            cursor: pointer;
            transform: translateY(0);
        }

        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .book-cover {
            height: 320px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .book-cover:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
        }

        .book-info {
            padding: 25px;
        }

        .book-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark);
            font-size: 1.2rem;
            line-height: 1.3;
        }

        .book-author {
            color: var(--text-light);
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .book-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .book-price {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.3rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .original-price {
            text-decoration: line-through;
            color: var(--text-light);
            font-size: 1rem;
            font-weight: normal;
        }

        .discount-badge {
            background: var(--accent);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .book-actions {
            display: flex;
            gap: 10px;
        }

        .borrow-btn {
            flex: 1;
            padding: 12px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .borrow-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        .borrow-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .borrow-btn.purchased {
            background: var(--success);
        }

        .favorite-btn {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            border: 1px solid #eee;
            color: #777;
            cursor: pointer;
            transition: var(--transition);
        }

        .favorite-btn:hover, .favorite-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .category-tag {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 255, 255, 0.9);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--primary);
            z-index: 2;
        }

        .rating-stars {
            color: #f39c12;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Cart Section */
        .cart-section {
            display: none;
            padding: 2rem 0;
        }

        .cart-items {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            gap: 20px;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-cover {
            width: 100px;
            height: 140px;
            background-size: cover;
            background-position: center;
            border-radius: 8px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .cart-item-author {
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .cart-item-price {
            font-weight: 700;
            color: var(--accent);
            font-size: 1.2rem;
        }

        .cart-item-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .remove-btn {
            padding: 8px 15px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
        }

        .remove-btn:hover {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        .cart-summary {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.3rem;
            color: var(--accent);
        }

        .checkout-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
            font-size: 1.1rem;
        }

        .checkout-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }

        /* Dashboard */
        .dashboard {
            display: none;
            padding: 2rem 0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            border-left: 5px solid var(--secondary);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        .stat-card h4 {
            font-size: 2rem;
            margin-bottom: 5px;
            color: var(--primary);
        }

        .stat-card p {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .dashboard-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }

        .dashboard-section h3 {
            margin-bottom: 25px;
            color: var(--primary);
            border-bottom: 2px solid var(--light);
            padding-bottom: 12px;
            font-size: 1.5rem;
        }

        .reading-goals {
            margin-top: 30px;
        }

        .goal-item {
            margin-bottom: 25px;
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .goal-title {
            font-weight: 600;
        }

        .goal-percentage {
            color: var(--secondary);
            font-weight: 600;
        }

        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin: 8px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--secondary), var(--accent));
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* Footer */
        footer {
            background: var(--primary);
            color: white;
            padding: 4rem 0 2rem;
            margin-top: 4rem;
        }

        [data-theme="dark"] footer {
            background: #1a2530;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 3rem;
        }

        .footer-section h3 {
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 12px;
            font-family: 'Playfair Display', serif;
            font-size: 1.4rem;
        }

        .footer-section h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 2px;
            background: var(--secondary);
        }

        .footer-links a {
            display: block;
            color: #ddd;
            text-decoration: none;
            margin-bottom: 12px;
            transition: var(--transition);
            cursor: pointer;
        }

        .footer-links a:hover {
            color: var(--secondary);
            transform: translateX(5px);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--secondary);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #aaa;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .search-bar {
                width: 80%;
            }
            
            .hero h2 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                gap: 10px;
            }
            
            .nav-links a {
                padding: 6px 15px;
                font-size: 0.9rem;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .books-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }
            
            .cart-item {
                flex-direction: column;
                text-align: center;
            }
            
            .cart-item-cover {
                width: 100%;
                max-width: 200px;
                margin: 0 auto;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
            max-width: 400px;
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            background: var(--danger);
        }

        .toast.info {
            background: var(--secondary);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Trace/Breadcrumb */
        .trace {
            padding: 15px 0;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .trace a {
            color: var(--secondary);
            text-decoration: none;
        }

        .trace span {
            margin: 0 8px;
        }

        /* Advanced Features */
        .book-highlights {
            display: flex;
            gap: 20px;
            margin-bottom: 40px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .highlight-card {
            min-width: 300px;
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .highlight-card:hover {
            transform: translateY(-5px);
        }

        .highlight-image {
            height: 180px;
            background-size: cover;
            background-position: center;
        }

        .highlight-content {
            padding: 20px;
        }

        .highlight-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .highlight-text {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .section-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }

        .section-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border-radius: 30px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .section-tab.active {
            background: var(--secondary);
            color: white;
        }

        .section-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .book-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
        }

        .filter-btn.active {
            background: var(--secondary);
            color: white;
            border-color: var(--secondary);
        }

        .book-carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 15px 5px;
            margin-bottom: 40px;
        }

        .book-carousel::-webkit-scrollbar {
            height: 6px;
        }

        .book-carousel::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .book-carousel::-webkit-scrollbar-thumb {
            background: var(--secondary);
            border-radius: 10px;
        }

        .carousel-item {
            min-width: 200px;
            background: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .carousel-item:hover {
            transform: translateY(-5px);
        }

        .carousel-cover {
            height: 250px;
            background-size: cover;
            background-position: center;
        }

        .carousel-info {
            padding: 15px;
        }

        .carousel-title {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.95rem;
        }

        .carousel-author {
            color: var(--text-light);
            font-size: 0.8rem;
        }

        .carousel-price {
            font-weight: 700;
            color: var(--accent);
            margin-top: 8px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        .modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .close-modal {
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            background: none;
            border: none;
            transition: var(--transition);
        }

        .close-modal:hover {
            color: var(--accent);
        }

        /* Book Details Modal */
        .book-details {
            padding: 25px;
            display: flex;
            gap: 30px;
        }

        .book-details-cover {
            flex: 0 0 300px;
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .book-details-info {
            flex: 1;
        }

        .book-details-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--primary);
            font-family: 'Playfair Display', serif;
        }

        .book-details-author {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 20px;
        }

        .book-details-description {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .book-details-meta {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .book-details-meta div {
            display: flex;
            flex-direction: column;
        }

        .book-details-meta label {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .book-actions-row {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        /* Payment Modal */
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .payment-method:hover {
            border-color: var(--secondary);
        }

        .payment-method.active {
            border-color: var(--secondary);
            background: rgba(52, 152, 219, 0.1);
        }

        .payment-method i {
            font-size: 1.5rem;
            color: var(--secondary);
        }

        .payment-details {
            display: none;
            margin-top: 20px;
        }

        .payment-details.active {
            display: block;
        }

        /* Order Tracking */
        .order-tracking {
            padding: 25px;
        }

        .tracking-steps {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            position: relative;
        }

        .tracking-steps:before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #eee;
            z-index: 1;
        }

        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            transition: var(--transition);
        }

        .step-icon.active {
            background: var(--secondary);
            color: white;
        }

        .step-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .step-label.active {
            color: var(--secondary);
            font-weight: 600;
        }

        .tracking-map {
            height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .map-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--accent);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        .order-details {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .order-item {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .order-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .order-item-cover {
            width: 60px;
            height: 80px;
            background-size: cover;
            background-position: center;
            border-radius: 5px;
        }

        .order-item-info {
            flex: 1;
        }

        .order-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .order-item-author {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        /* Read Book Modal */
        .read-book-modal .modal-content {
            max-width: 900px;
            height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .book-reader {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .reader-header {
            padding: 15px 25px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reader-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.1rem;
        }

        .reader-controls {
            padding: 15px 25px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
        }

        .page-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .page-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-btn:hover {
            background: #2980b9;
        }

        .page-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }

        .page-indicator {
            font-weight: 600;
            color: var(--primary);
        }

        .reader-settings {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .font-size-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .font-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #e9ecef;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .font-btn:hover {
            background: #dee2e6;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            background: var(--card-bg);
            color: var(--text);
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .submit-btn:hover {
            background: #2980b9;
        }

        /* Read Button */
        .read-btn {
            padding: 10px 20px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .read-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        /* Achievement Badges */
        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: var(--warning);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        /* Confirmation Dialog */
        .confirmation-dialog {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            max-width: 500px;
            margin: 0 auto;
        }

        .confirmation-dialog h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .confirmation-dialog p {
            margin-bottom: 20px;
            color: var(--text-light);
        }

        .confirmation-actions {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }

        .confirmation-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .confirmation-actions .confirm-btn {
            background: var(--danger);
            color: white;
        }

        .confirmation-actions .cancel-btn {
            background: #f8f9fa;
            color: var(--text);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Onboarding Guide */
        .onboarding-guide {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .onboarding-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .onboarding-step {
            text-align: center;
        }

        .onboarding-step h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .onboarding-step p {
            margin-bottom: 25px;
            color: var(--text-light);
            line-height: 1.6;
        }

        .onboarding-image {
            height: 200px;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            margin-bottom: 25px;
        }

        .onboarding-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        .onboarding-actions button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .onboarding-actions .next-btn {
            background: var(--secondary);
            color: white;
        }

        .onboarding-actions .prev-btn {
            background: #f8f9fa;
            color: var(--text);
        }

        .onboarding-actions .finish-btn {
            background: var(--success);
            color: white;
        }

        .skip-onboarding {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Welcome Message */
        .welcome-message {
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Keyboard Shortcuts Help */
        .keyboard-shortcuts {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            max-width: 500px;
            margin: 0 auto;
        }

        .keyboard-shortcuts h3 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .shortcut-keys {
            display: flex;
            gap: 5px;
        }

        .key {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 5px 10px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        /* Feedback Modal */
        .feedback-rating {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 10px;
        }

        .rating-star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: var(--transition);
        }

        .rating-star:hover,
        .rating-star.active {
            color: #f39c12;
        }

        /* Favorite Removal */
        .favorite-remove-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.9);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
            color: var(--danger);
            border: none;
        }

        .favorite-remove-btn:hover {
            background: var(--danger);
            color: white;
        }

        /* Cancel Order Button */
        .cancel-order-btn {
            padding: 8px 16px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .cancel-order-btn:hover {
            background: #c0392b;
        }

        /* User Details in Order Confirmation */
        .user-details {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .user-details h4 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .user-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .user-detail-item {
            display: flex;
            flex-direction: column;
        }

        .user-detail-label {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .user-detail-value {
            color: var(--text);
        }

        /* Return Policy & Warranty Sections */
        .policy-section {
            margin-bottom: 40px;
        }

        .policy-section h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 2px solid var(--light);
            padding-bottom: 10px;
        }

        .policy-content {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .policy-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .policy-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .policy-item h4 {
            margin-bottom: 10px;
            color: var(--secondary);
        }

        /* Enhanced transitions for modals */
        .modal-content {
            transform: scale(0.9);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .modal.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        /* Enhanced transitions for page sections */
        .page-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .page-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Enhanced button transitions */
        .btn-enhanced {
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .btn-enhanced:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn-enhanced:hover:before {
            left: 100%;
        }

        /* Enhanced cart item transitions */
        .cart-item {
            transition: all 0.3s ease;
        }

        .cart-item.removing {
            transform: translateX(100%);
            opacity: 0;
        }

        /* Enhanced book card transitions */
        .book-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Enhanced navigation transitions */
        .nav-links a {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Enhanced search bar transitions */
        .search-bar input {
            transition: all 0.3s ease;
        }

        .search-bar input:focus {
            transform: scale(1.02);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo" id="homeLink">
                <i class="fas fa-book-open"></i>
                <h1>BookNest</h1>
            </div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search for books, authors, or topics...">
                <button id="searchButton"><i class="fas fa-search"></i></button>
            </div>
            <div class="user-actions">
                <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </button>
                <a id="signInLink"><i class="fas fa-user"></i> Sign In</a>
                <a id="favoritesLink"><i class="fas fa-heart"></i> Favorites</a>
                <a id="cartLink">
                    <i class="fas fa-shopping-cart"></i> Cart
                    <span class="cart-badge" id="cartCount">0</span>
                </a>
                <a id="ordersLink"><i class="fas fa-box"></i> Orders</a>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="nav-links">
                <a class="nav-link active" data-category="all">All Books</a>
                <a class="nav-link" data-category="fiction">Fiction</a>
                <a class="nav-link" data-category="non-fiction">Non-Fiction</a>
                <a class="nav-link" data-category="science">Science</a>
                <a class="nav-link" data-category="technology">Technology</a>
                <a class="nav-link" data-category="history">History</a>
                <a class="nav-link" data-category="biography">Biography</a>
                <a class="nav-link" data-category="children">Children</a>
            </div>
        </div>
    </nav>

    <!-- Trace/Breadcrumb -->
    <div class="container trace" id="trace">
        <a href="#" id="traceHome">Home</a> <span>></span> <span id="traceCurrent">All Books</span>
    </div>

    <!-- Welcome Message (shown after login) -->
    <div class="container welcome-message" id="welcomeMessage" style="display: none;">
        <i class="fas fa-check-circle"></i>
        <span id="welcomeText">Welcome back! You have <span id="unreadNotifications">0</span> new notifications.</span>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Discover Your Next Favorite Book</h2>
            <p>Explore thousands of books across all genres. Purchase with multiple payment options and enjoy reading anywhere, anytime.</p>
            <button class="cta-button btn-enhanced" id="exploreBtn">Explore Collections <i class="fas fa-arrow-right"></i></button>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container" id="mainContent">
        <!-- Book Highlights -->
        <section class="book-highlights">
            <div class="highlight-card">
                <div class="highlight-image" style="background-image: url('https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3')"></div>
                <div class="highlight-content">
                    <h3 class="highlight-title">Book of the Month</h3>
                    <p class="highlight-text">Discover our featured book of the month with exclusive discounts.</p>
                </div>
            </div>
            <div class="highlight-card">
                <div class="highlight-image" style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3')"></div>
                <div class="highlight-content">
                    <h3 class="highlight-title">Author Spotlight</h3>
                    <p class="highlight-text">Meet this month's featured author and explore their works.</p>
                </div>
            </div>
            <div class="highlight-card">
                <div class="highlight-image" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3')"></div>
                <div class="highlight-content">
                    <h3 class="highlight-title">Reading Challenges</h3>
                    <p class="highlight-text">Join our reading challenges and earn rewards for your progress.</p>
                </div>
            </div>
        </section>

        <!-- New Arrivals Section -->
        <section id="newArrivalsSection" class="page-section">
            <div class="section-title">
                <h2>New Arrivals</h2>
                <p>Discover the latest additions to our collection</p>
            </div>
            <div class="book-carousel" id="newArrivalsCarousel">
                <!-- New arrival books will be generated by JavaScript -->
            </div>
        </section>

        <!-- Featured Books -->
        <section class="page-section">
            <div class="section-title">
                <h2>Featured Books</h2>
                <p>Curated selection of our most popular titles</p>
            </div>
            
            <div class="section-tabs">
                <div class="section-tab active" data-tab="all">All</div>
                <div class="section-tab" data-tab="bestsellers">Bestsellers</div>
                <div class="section-tab" data-tab="recommended">Recommended</div>
                <div class="section-tab" data-tab="discounted">Discounted</div>
            </div>
            
            <div class="book-filters">
                <div class="filter-btn active" data-filter="all">All</div>
                <div class="filter-btn" data-filter="fiction">Fiction</div>
                <div class="filter-btn" data-filter="non-fiction">Non-Fiction</div>
                <div class="filter-btn" data-filter="science">Science</div>
                <div class="filter-btn" data-filter="technology">Technology</div>
                <div class="filter-btn" data-filter="history">History</div>
            </div>
            
            <div class="books-grid" id="booksGrid">
                <!-- Book cards will be generated by JavaScript -->
            </div>
        </section>

        <!-- Coming Soon Section -->
        <section class="page-section">
            <div class="section-title">
                <h2>Coming Soon</h2>
                <p>Get ready for these upcoming releases</p>
            </div>
            <div class="book-carousel" id="comingSoonCarousel">
                <!-- Coming soon books will be generated by JavaScript -->
            </div>
        </section>

        <!-- Return Policy & Warranty Section -->
        <section class="page-section" id="policySection">
            <div class="section-title">
                <h2>Policies & Warranty</h2>
                <p>Learn about our return policy and warranty information</p>
            </div>
            
            <div class="policy-section">
                <h3>Return Policy</h3>
                <div class="policy-content">
                    <div class="policy-item">
                        <h4>30-Day Return Policy</h4>
                        <p>We offer a 30-day return policy for all digital book purchases. If you're not satisfied with your purchase, you can request a refund within 30 days of purchase.</p>
                    </div>
                    <div class="policy-item">
                        <h4>How to Return</h4>
                        <p>To initiate a return, go to your order history, select the order you wish to return, and click the "Return" button. Our customer service team will process your request within 2 business days.</p>
                    </div>
                    <div class="policy-item">
                        <h4>Conditions</h4>
                        <p>Books must be returned in their original condition. Refunds will be issued to your original payment method within 5-7 business days after we receive and process your return.</p>
                    </div>
                </div>
            </div>
            
            <div class="policy-section">
                <h3>Warranty Information</h3>
                <div class="policy-content">
                    <div class="policy-item">
                        <h4>Lifetime Access Warranty</h4>
                        <p>All digital books purchased from BookNest come with a lifetime access warranty. You can access your purchased books anytime, from any device, for as long as you maintain your BookNest account.</p>
                    </div>
                    <div class="policy-item">
                        <h4>Format Compatibility</h4>
                        <p>Our books are compatible with all major e-reader formats including EPUB, PDF, and MOBI. If you experience any compatibility issues, our support team will help you find a suitable format.</p>
                    </div>
                    <div class="policy-item">
                        <h4>Technical Support</h4>
                        <p>We provide free technical support for all book access and reading issues. Contact our support team through the Help Center for assistance with any technical problems.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Cart Section -->
    <section class="cart-section container" id="cartSection">
        <div class="section-title">
            <h2>Your Cart</h2>
            <p>Review your selected books</p>
        </div>
        
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be generated by JavaScript -->
        </div>
        
        <div class="cart-summary">
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="cartSubtotal">$0.00</span>
            </div>
            <div class="summary-row">
                <span>Tax:</span>
                <span id="cartTax">$0.00</span>
            </div>
            <div class="summary-row">
                <span>Discount:</span>
                <span id="cartDiscount">$0.00</span>
            </div>
            <div class="summary-row summary-total">
                <span>Total:</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="checkout-btn btn-enhanced" id="checkoutBtn">Proceed to Checkout</button>
        </div>
    </section>

    <!-- Orders Section -->
    <section class="dashboard container" id="ordersSection">
        <div class="section-title">
            <h2>Your Orders</h2>
            <p>Track your orders and view order history</p>
        </div>
        
        <div class="dashboard-section">
            <h3>Active Orders</h3>
            <div id="activeOrders">
                <!-- Active orders will be generated by JavaScript -->
            </div>
        </div>
        
        <div class="dashboard-section">
            <h3>Order History</h3>
            <div id="orderHistory">
                <!-- Order history will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Dashboard -->
    <section class="dashboard container" id="dashboard">
        <div class="section-title">
            <h2>My Library Dashboard</h2>
            <p>Track your reading progress and manage your books</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-book"></i>
                <h4 id="purchasedCount">0</h4>
                <p>Books Purchased</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-heart"></i>
                <h4 id="favoritesCount">0</h4>
                <p>Favorites</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-history"></i>
                <h4 id="readingTime">0h</h4>
                <p>Reading Time</p>
            </div>
            <div class="stat-card">
                <i class="fas fa-award"></i>
                <h4 id="pointsEarned">0</h4>
                <p>Points Earned</p>
            </div>
        </div>

        <!-- Reading Goals Section -->
        <div class="dashboard-section">
            <h3>Reading Goals</h3>
            <div class="reading-goals">
                <div class="goal-item">
                    <div class="goal-header">
                        <span class="goal-title">Annual Reading Challenge</span>
                        <span class="goal-percentage">45%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 45%"></div>
                    </div>
                </div>
                <div class="goal-item">
                    <div class="goal-header">
                        <span class="goal-title">Monthly Reading Goal</span>
                        <span class="goal-percentage">75%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                </div>
                <div class="goal-item">
                    <div class="goal-header">
                        <span class="goal-title">Genre Exploration</span>
                        <span class="goal-percentage">60%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-section">
            <h3>My Purchased Books</h3>
            <div class="books-grid" id="purchasedBooksGrid">
              
            </div>
        </div>

        <div class="dashboard-section">
            <h3>My Favorites</h3>
            <div class="books-grid" id="favoritesGrid">
                
            </div>
        </div>

       
        <div class="dashboard-section">
            <h3>Your Achievements</h3>
            <div id="achievements">
                <div class="achievement-badge">
                    <i class="fas fa-book-reader"></i>
                    <span>First Book</span>
                </div>
                <div class="achievement-badge">
                    <i class="fas fa-fire"></i>
                    <span>5 Books Read</span>
                </div>
                <div class="achievement-badge">
                    <i class="fas fa-trophy"></i>
                    <span>Reading Streak</span>
                </div>
                
            </div>
        </div>
    </section>

   
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About BookNest</h3>
                    <p>BookNest is a digital library platform providing access to thousands of books across various genres. Our mission is to make reading accessible to everyone.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <div class="footer-links">
                        <a href="#" class="footer-link" data-action="home">Home</a>
                        <a href="#" class="footer-link" data-action="browse">Browse Books</a>
                        <a href="#" class="footer-link" data-action="new">New Arrivals</a>
                        <a href="#" class="footer-link" data-action="popular">Popular Books</a>
                        <a href="#" class="footer-link" data-action="account">My Account</a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Help & Support</h3>
                    <div class="footer-links">
                        <a href="#" class="footer-link" data-action="faq">FAQ</a>
                        <a href="#" class="footer-link" data-action="borrowing">Borrowing Guide</a>
                        <a href="#" class="footer-link" data-action="contact">Contact Us</a>
                        <a href="#" class="footer-link" data-action="privacy">Privacy Policy</a>
                        <a href="#" class="footer-link" data-action="terms">Terms of Service</a>
                        <a href="#" class="footer-link" data-action="return-policy">Return Policy</a>
                        <a href="#" class="footer-link" data-action="warranty">Warranty</a>
                        <a href="#" class="footer-link" data-action="feedback">Give Feedback</a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 BookNest Online Library. All rights reserved.</p>
            </div>
        </div>
    </footer>

   
    <div class="modal" id="bookDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Book Details</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="book-details" id="bookDetailsContent">
                
            </div>
        </div>
    </div>

    
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Complete Your Purchase</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <div class="form-group">
                    <label>Book: <span id="paymentBookTitle"></span></label>
                    <label>Price: $<span id="paymentBookPrice"></span></label>
                </div>
                
                <h3 style="margin-bottom: 15px;">Shipping Information</h3>
                <div class="form-group">
                    <label for="shippingName">Full Name</label>
                    <input type="text" id="shippingName" placeholder="Your full name">
                </div>
                <div class="form-group">
                    <label for="shippingAddress">Address</label>
                    <textarea id="shippingAddress" rows="3" placeholder="Your complete address"></textarea>
                </div>
                <div class="form-group">
                    <label for="shippingCity">City</label>
                    <input type="text" id="shippingCity" placeholder="Your city">
                </div>
                <div style="display: flex; gap: 15px;">
                    <div class="form-group" style="flex: 1;">
                        <label for="shippingState">State</label>
                        <input type="text" id="shippingState" placeholder="State">
                    </div>
                    <div class="form-group" style="flex: 1;">
                        <label for="shippingZip">ZIP Code</label>
                        <input type="text" id="shippingZip" placeholder="ZIP code">
                    </div>
                </div>
                <div class="form-group">
                    <label for="shippingPhone">Phone Number</label>
                    <input type="text" id="shippingPhone" placeholder="Your phone number">
                </div>
                
                <h3 style="margin-bottom: 15px;">Payment Method</h3>
                <div class="payment-methods">
                    <div class="payment-method active" data-method="card">
                        <i class="fas fa-credit-card"></i>
                        <div>
                            <h3>Credit/Debit Card</h3>
                            <p>Pay with Visa, MasterCard, or American Express</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="easypaisa">
                        <i class="fas fa-mobile-alt"></i>
                        <div>
                            <h3>EasyPaisa</h3>
                            <p>Pay using your EasyPaisa account</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="jazzcash">
                        <i class="fas fa-wallet"></i>
                        <div>
                            <h3>JazzCash</h3>
                            <p>Pay using your JazzCash wallet</p>
                        </div>
                    </div>
                    <div class="payment-method" data-method="bank">
                        <i class="fas fa-university"></i>
                        <div>
                            <h3>Bank Transfer</h3>
                            <p>Transfer directly from your bank account</p>
                        </div>
                    </div>
                </div>

                <div class="payment-details active" id="cardDetails">
                    <div class="form-group">
                        <label for="cardNumber">Card Number</label>
                        <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456">
                    </div>
                    <div class="form-group">
                        <label for="cardName">Cardholder Name</label>
                        <input type="text" id="cardName" placeholder="John Doe">
                    </div>
                    <div style="display: flex; gap: 15px;">
                        <div class="form-group" style="flex: 1;">
                            <label for="cardExpiry">Expiry Date</label>
                            <input type="text" id="cardExpiry" placeholder="MM/YY">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="cardCVC">CVC</label>
                            <input type="text" id="cardCVC" placeholder="123">
                        </div>
                    </div>
                </div>

                <div class="payment-details" id="easypaisaDetails">
                    <div class="form-group">
                        <label for="easypaisaNumber">EasyPaisa Mobile Number</label>
                        <input type="text" id="easypaisaNumber" placeholder="03XX-XXXXXXX">
                    </div>
                    <div class="form-group">
                        <label for="easypaisaCNIC">CNIC Number</label>
                        <input type="text" id="easypaisaCNIC" placeholder="XXXXX-XXXXXXX-X">
                    </div>
                    <div class="form-group">
                        <label for="easypaisaPIN">EasyPaisa PIN</label>
                        <input type="password" id="easypaisaPIN" placeholder="5-digit PIN">
                    </div>
                    <div class="form-group">
                        <p>You will receive a confirmation message on your mobile number. Please confirm the payment to complete your purchase.</p>
                    </div>
                </div>

                <div class="payment-details" id="jazzcashDetails">
                    <div class="form-group">
                        <label for="jazzcashNumber">JazzCash Mobile Number</label>
                        <input type="text" id="jazzcashNumber" placeholder="03XX-XXXXXXX">
                    </div>
                    <div class="form-group">
                        <label for="jazzcashCNIC">CNIC Number</label>
                        <input type="text" id="jazzcashCNIC" placeholder="XXXXX-XXXXXXX-X">
                    </div>
                    <div class="form-group">
                        <label for="jazzcashPIN">JazzCash PIN</label>
                        <input type="password" id="jazzcashPIN" placeholder="4-digit MPIN">
                    </div>
                    <div class="form-group">
                        <p>You will receive a confirmation message on your mobile number. Please confirm the payment to complete your purchase.</p>
                    </div>
                </div>

                <div class="payment-details" id="bankDetails">
                    <div class="form-group">
                        <label for="bankName">Bank Name</label>
                        <select id="bankName">
                            <option value="">Select Bank</option>
                            <option value="hbl">HBL</option>
                            <option value="ubl">UBL</option>
                            <option value="mcb">MCB</option>
                            <option value="abl">Allied Bank</option>
                            <option value="scb">Standard Chartered</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="accountNumber">Account Number</label>
                        <input type="text" id="accountNumber" placeholder="Your account number">
                    </div>
                    <div class="form-group">
                        <label for="accountTitle">Account Title</label>
                        <input type="text" id="accountTitle" placeholder="Account holder name">
                    </div>
                    <div class="form-group">
                        <p>Please transfer the amount to our bank account and upload the transaction receipt.</p>
                    </div>
                </div>

                <button class="submit-btn btn-enhanced" id="completePayment">Complete Purchase</button>
            </div>
        </div>
    </div>

    
    <div class="modal" id="orderTrackingModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Order Tracking</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="order-tracking" id="orderTrackingContent">
               
            </div>
        </div>
    </div>


    <div class="modal read-book-modal" id="readBookModal">
        <div class="modal-content">
            <div class="reader-header">
                <h3 id="readerTitle">Book Title</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="book-reader">
                <div class="reader-content" id="readerContent">
                    
                </div>
            </div>
            <div class="reader-controls">
                <div class="page-controls">
                    <button class="page-btn" id="prevPage" disabled><i class="fas fa-chevron-left"></i></button>
                    <span class="page-indicator">Page <span id="currentPage">1</span> of <span id="totalPages">10</span></span>
                    <button class="page-btn" id="nextPage"><i class="fas fa-chevron-right"></i></button>
                </div>
                <div class="reader-settings">
                    <div class="font-size-controls">
                        <button class="font-btn" id="decreaseFont"><i class="fas fa-minus"></i></button>
                        <span>Font Size</span>
                        <button class="font-btn" id="increaseFont"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

 
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sign In to BookNest</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <div id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password">
                    </div>
                    <button class="submit-btn btn-enhanced" id="loginBtn">Sign In</button>
                    <p style="text-align: center; margin-top: 15px;">
                        Don't have an account? <a href="#" id="showSignup" style="color: var(--secondary);">Sign up here</a>
                    </p>
                </div>
                
                <div id="signupForm" style="display: none;">
                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" id="signupName" placeholder="Your full name">
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email Address</label>
                        <input type="email" id="signupEmail" placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" placeholder="Create a password">
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" placeholder="Confirm your password">
                    </div>
                    <button class="submit-btn btn-enhanced" id="signupBtn">Create Account</button>
                    <p style="text-align: center; margin-top: 15px;">
                        Already have an account? <a href="#" id="showLogin" style="color: var(--secondary);">Sign in here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>

   
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="confirmation-dialog">
                <h3 id="confirmationTitle">Confirm Action</h3>
                <p id="confirmationMessage">Are you sure you want to perform this action?</p>
                <div class="confirmation-actions">
                    <button class="cancel-btn" id="cancelAction">Cancel</button>
                    <button class="confirm-btn" id="confirmAction">Confirm</button>
                </div>
            </div>
        </div>
    </div>

   
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Share Your Feedback</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <div class="form-group">
                    <label for="feedbackName">Your Name</label>
                    <input type="text" id="feedbackName" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="feedbackEmail">Email Address</label>
                    <input type="email" id="feedbackEmail" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>How would you rate your experience?</label>
                    <div class="feedback-rating">
                        <span class="rating-star" data-rating="1"></span>
                        <span class="rating-star" data-rating="2"></span>
                        <span class="rating-star" data-rating="3"></span>
                        <span class="rating-star" data-rating="4"></span>
                        <span class="rating-star" data-rating="5"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="feedbackMessage">Your Feedback</label>
                    <textarea id="feedbackMessage" rows="5" placeholder="Tell us about your experience with BookNest..."></textarea>
                </div>
                <button class="submit-btn btn-enhanced" id="submitFeedback">Submit Feedback</button>
            </div>
        </div>
    </div>

   
    <div class="onboarding-guide" id="onboardingGuide" style="display: none;">
        <div class="onboarding-content">
            <button class="skip-onboarding" id="skipOnboarding">Skip</button>
            <div class="onboarding-step" id="onboardingStep1">
                <div class="onboarding-image" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3')"></div>
                <h2>Welcome to BookNest!</h2>
                <p>Your personal digital library with thousands of books across all genres. Let's take a quick tour to help you get started.</p>
                <div class="onboarding-actions">
                    <div></div>
                    <button class="next-btn btn-enhanced" data-next="2">Next</button>
                </div>
            </div>
            <div class="onboarding-step" id="onboardingStep2" style="display: none;">
                <div class="onboarding-image" style="background-image: url('https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3')"></div>
                <h2>Discover Books</h2>
                <p>Browse our extensive collection by category, search for specific titles, or explore our featured books and new arrivals.</p>
                <div class="onboarding-actions">
                    <button class="prev-btn" data-prev="1">Previous</button>
                    <button class="next-btn btn-enhanced" data-next="3">Next</button>
                </div>
            </div>
            <div class="onboarding-step" id="onboardingStep3" style="display: none;">
                <div class="onboarding-image" style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3')"></div>
                <h2>Purchase & Read</h2>
                <p>Add books to your cart, complete your purchase with multiple payment options, and enjoy reading with our built-in reader.</p>
                <div class="onboarding-actions">
                    <button class="prev-btn" data-prev="2">Previous</button>
                    <button class="next-btn btn-enhanced" data-next="4">Next</button>
                </div>
            </div>
            <div class="onboarding-step" id="onboardingStep4" style="display: none;">
                <div class="onboarding-image" style="background-image: url('https://images.unsplash.com/photo-1559526324-4b87b5e36e44?ixlib=rb-4.0.3')"></div>
                <h2>Track Your Progress</h2>
                <p>Monitor your reading goals, earn achievements, and keep track of your purchased books and favorites in your personal dashboard.</p>
                <div class="onboarding-actions">
                    <button class="prev-btn" data-prev="3">Previous</button>
                    <button class="finish-btn btn-enhanced" id="finishOnboarding">Get Started</button>
                </div>
            </div>
        </div>
    </div>

    
    <div class="modal" id="keyboardShortcutsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Keyboard Shortcuts</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 25px;">
                <div class="keyboard-shortcuts">
                    <div class="shortcut-item">
                        <span>Search</span>
                        <div class="shortcut-keys">
                            <span class="key">Ctrl</span>
                            <span class="key">K</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <span>Close Modal</span>
                        <div class="shortcut-keys">
                            <span class="key">Esc</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <span>Navigate to Home</span>
                        <div class="shortcut-keys">
                            <span class="key">Ctrl</span>
                            <span class="key">H</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <span>Navigate to Cart</span>
                        <div class="shortcut-keys">
                            <span class="key">Ctrl</span>
                            <span class="key">C</span>
                        </div>
                    </div>
                    <div class="shortcut-item">
                        <span>Toggle Dark Mode</span>
                        <div class="shortcut-keys">
                            <span class="key">Ctrl</span>
                            <span class="key">D</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="toast" id="toast">
        <i class="fas fa-check-circle" id="toastIcon"></i>
        <span id="toastMessage">Book added to cart!</span>
    </div>

    <script>
        
        const books = [
            {
                id: 1,
                title: "The Silent Patient",
                author: "Alex Michaelides",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3",
                rating: 4.5,
                pages: 336,
                year: 2019,
                price: 12.99,
                originalPrice: 16.99,
                discount: 23,
                description: "A psychological thriller about a woman who shoots her husband and then stops speaking.",
                isNew: true,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Alicia Berenson was thirty-three years old when she killed her husband. They had been married for seven years. They were both artistsAlicia was a painter, and Gabriel was a well-known fashion photographer. He was forty-four years old when he died. He was found tied to a chair with a single gunshot wound to his face. The gun was on the floor beside him. There was no sign of forced entry, and no evidence of anyone else having been in the house. Alicia was discovered in the studio, sitting in a chair, a blank expression on her face. She had slashed her wrists. She was covered in blood, but she was alive. She hasn't spoken a word since.",
                content: [
                    "Alicia Berenson was thirty-three years old when she killed her husband.",
                    "They had been married for seven years. They were both artistsAlicia was a painter, and Gabriel was a well-known fashion photographer.",
                    "He was forty-four years old when he died. He was found tied to a chair with a single gunshot wound to his face.",
                    "The gun was on the floor beside him. There was no sign of forced entry, and no evidence of anyone else having been in the house.",
                    "Alicia was discovered in the studio, sitting in a chair, a blank expression on her face. She had slashed her wrists.",
                    "She was covered in blood, but she was alive. She hasn't spoken a word since.",
                    "That was six years ago. Since then, she has been confined to the Grove, a secure forensic unit in North London.",
                    "Theo Faber is a psychotherapist who has waited a long time for the opportunity to work with Alicia.",
                    "His determination to get her to talk and unravel the mystery of why she shot her husband takes him down a twisting path into his own motivations.",
                    "The Silent Patient is a shocking psychological thriller of a woman's act of violence against her husbandand of the therapist obsessed with uncovering her motive."
                ]
            },
            {
                id: 2,
                title: "Where the Crawdads Sing",
                author: "Delia Owens",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1629992101753-56d196c8aabb?ixlib=rb-4.0.3",
                rating: 4.8,
                pages: 384,
                year: 2018,
                price: 14.99,
                originalPrice: 19.99,
                discount: 25,
                description: "A coming-of-age murder mystery about an abandoned girl who raises herself in the marshes of North Carolina.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "For years, rumors of the 'Marsh Girl' have haunted Barkley Cove, a quiet town on the North Carolina coast. So in late 1969, when handsome Chase Andrews is found dead, the locals immediately suspect Kya Clark, the so-called Marsh Girl. But Kya is not what they say. Sensitive and intelligent, she has survived for years alone in the marsh that she calls home, finding friends in the gulls and lessons in the sand. Then the time comes when she yearns to be touched and loved. When two young men from town become intrigued by her wild beauty, Kya opens herself to a new lifeuntil the unthinkable happens.",
                content: [
                    "For years, rumors of the 'Marsh Girl' have haunted Barkley Cove, a quiet town on the North Carolina coast.",
                    "So in late 1969, when handsome Chase Andrews is found dead, the locals immediately suspect Kya Clark, the so-called Marsh Girl.",
                    "But Kya is not what they say. Sensitive and intelligent, she has survived for years alone in the marsh that she calls home.",
                    "She found friends in the gulls and lessons in the sand. Then the time comes when she yearns to be touched and loved.",
                    "When two young men from town become intrigued by her wild beauty, Kya opens herself to a new lifeuntil the unthinkable happens.",
                    "Where the Crawdads Sing is at once an exquisite ode to the natural world, a heartbreaking coming-of-age story, and a surprising tale of possible murder.",
                    "Owens reminds us that we are forever shaped by the children we once were, and that we are all subject to the beautiful and violent secrets that nature keeps."
                ]
            },
            {
                id: 3,
                title: "The Sixth Extinction",
                author: "Elizabeth Kolbert",
                category: "science",
                cover: "https://images.unsplash.com/photo-1559526324-4b87b5e36e44?ixlib=rb-4.0.3",
                rating: 4.5,
                pages: 319,
                year: 2014,
                price: 16.99,
                originalPrice: 18.99,
                discount: 10,
                description: "Over the last half-billion years, there have been five mass extinctions.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "Over the last half-billion years, there have been five mass extinctions, when the diversity of life on earth suddenly and dramatically contracted. Scientists around the world are currently monitoring the sixth extinction, predicted to be the most devastating extinction event since the asteroid impact that wiped out the dinosaurs. This time around, the cataclysm is us. In The Sixth Extinction, Elizabeth Kolbert draws on the work of scores of researchers in half a dozen disciplines, accompanying many of them into the field: geologists who study deep ocean cores, botanists who follow the tree line as it climbs up the Andes, marine biologists who dive off the Great Barrier Reef. She introduces us to a dozen species, some already gone, others facing extinction, including the Panamanian golden frog, the Sumatran rhino, and the black-faced honeycreeper of Maui. Through these stories, Kolbert provides a moving account of the disappearances occurring all around us and traces the evolution of extinction as concept, from its first articulation by Georges Cuvier in revolutionary Paris up through the present day. The sixth extinction is likely to be mankind's most lasting legacy; as Kolbert observes, it compels us to rethink the fundamental question of what it means to be human.",
                content: [
                    "Over the last half-billion years, there have been five mass extinctions, when the diversity of life on earth suddenly and dramatically contracted.",
                    "Scientists around the world are currently monitoring the sixth extinction, predicted to be the most devastating extinction event since the asteroid impact that wiped out the dinosaurs.",
                    "This time around, the cataclysm is us. In The Sixth Extinction, Elizabeth Kolbert draws on the work of scores of researchers in half a dozen disciplines.",
                    "She accompanies many of them into the field: geologists who study deep ocean cores, botanists who follow the tree line as it climbs up the Andes, marine biologists who dive off the Great Barrier Reef.",
                    "She introduces us to a dozen species, some already gone, others facing extinction, including the Panamanian golden frog, the Sumatran rhino, and the black-faced honeycreeper of Maui.",
                    "Through these stories, Kolbert provides a moving account of the disappearances occurring all around us and traces the evolution of extinction as concept.",
                    "The sixth extinction is likely to be mankind's most lasting legacy; as Kolbert observes, it compels us to rethink the fundamental question of what it means to be human."
                ]
            },
            {
                id: 4,
                title: "The Midnight Library",
                author: "Matt Haig",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1532012197267-da84d127e765?ixlib=rb-4.0.3",
                rating: 4.4,
                pages: 304,
                year: 2020,
                price: 11.99,
                originalPrice: 14.99,
                discount: 20,
                description: "A novel about a library that contains books that let you experience the different lives you might have lived.",
                isNew: true,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "Between life and death there is a library, and within that library, the shelves go on forever. Every book provides a chance to try another life you could have lived. To see how things would be if you had made other choices... Would you have done anything different, if you had the chance to undo your regrets? Nora Seed finds herself faced with this decision. Faced with the possibility of changing her life for a new one, following a different career, undoing old breakups, realizing her dreams of becoming a glaciologist, she must search within herself as she travels through the Midnight Library to decide what is truly fulfilling in life, and what makes it worth living in the first place.",
                content: [
                    "Between life and death there is a library, and within that library, the shelves go on forever.",
                    "Every book provides a chance to try another life you could have lived. To see how things would be if you had made other choices...",
                    "Would you have done anything different, if you had the chance to undo your regrets?",
                    "Nora Seed finds herself faced with this decision.",
                    "Faced with the possibility of changing her life for a new one, following a different career, undoing old breakups, realizing her dreams of becoming a glaciologist.",
                    "She must search within herself as she travels through the Midnight Library to decide what is truly fulfilling in life.",
                    "The Midnight Library is a novel about all the choices that go into a life well lived."
                ]
            },
            {
                id: 5,
                title: "Atomic Habits",
                author: "James Clear",
                category: "non-fiction",
                cover: "https://images.unsplash.com/photo-1532012197267-da84d127e765?ixlib=rb-4.0.3",
                rating: 4.8,
                pages: 320,
                year: 2018,
                price: 15.99,
                description: "A guide to building good habits and breaking bad ones with proven strategies.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "No matter your goals, Atomic Habits offers a proven framework for improvingevery day. James Clear, one of the world's leading experts on habit formation, reveals practical strategies that will teach you exactly how to form good habits, break bad ones, and master the tiny behaviors that lead to remarkable results. If you're having trouble changing your habits, the problem isn't you. The problem is your system. Bad habits repeat themselves again and again not because you don't want to change, but because you have the wrong system for change. You do not rise to the level of your goals. You fall to the level of your systems. Here, you'll get a proven system that can take you to new heights.",
                content: [
                    "No matter your goals, Atomic Habits offers a proven framework for improvingevery day.",
                    "James Clear, one of the world's leading experts on habit formation, reveals practical strategies that will teach you exactly how to form good habits, break bad ones.",
                    "If you're having trouble changing your habits, the problem isn't you. The problem is your system.",
                    "Bad habits repeat themselves again and again not because you don't want to change, but because you have the wrong system for change.",
                    "You do not rise to the level of your goals. You fall to the level of your systems.",
                    "Here, you'll get a proven system that can take you to new heights."
                ]
            },
            {
                id: 6,
                title: "Educated",
                author: "Tara Westover",
                category: "non-fiction",
                cover: "https://images.unsplash.com/photo-1512820790803-83ca734da794?ixlib=rb-4.0.3",
                rating: 4.7,
                pages: 352,
                year: 2018,
                price: 13.49,
                description: "A memoir about a young woman who, kept out of school, leaves her survivalist family and goes on to earn a PhD from Cambridge University.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Tara Westover was seventeen the first time she set foot in a classroom. Born to survivalists in the mountains of Idaho, she prepared for the end of the world by stockpiling home-canned peaches and sleeping with her 'head-for-the-hills bag'. In the summer she stewed herbs for her mother, a midwife and healer, and in the winter she salvaged in her father's junkyard. Her father forbade hospitals, so Tara never saw a doctor or nurse. Gashes and concussions, even burns from explosions, were all treated at home with herbalism. The family was so isolated from mainstream society that there was no one to ensure the children received an education, and no one to intervene when one of Tara's older brothers became violent.",
                content: [
                    "Tara Westover was seventeen the first time she set foot in a classroom.",
                    "Born to survivalists in the mountains of Idaho, she prepared for the end of the world by stockpiling home-canned peaches and sleeping with her 'head-for-the-hills bag'.",
                    "In the summer she stewed herbs for her mother, a midwife and healer, and in the winter she salvaged in her father's junkyard.",
                    "Her father forbade hospitals, so Tara never saw a doctor or nurse.",
                    "Gashes and concussions, even burns from explosions, were all treated at home with herbalism.",
                    "The family was so isolated from mainstream society that there was no one to ensure the children received an education.",
                    "Educated is an account of the struggle for self-invention. It is a tale of fierce family loyalty and of the grief that comes from severing one's closest ties."
                ]
            },
            {
                id: 7,
                title: "Sapiens: A Brief History of Humankind",
                author: "Yuval Noah Harari",
                category: "science",
                cover: "https://images.unsplash.com/photo-1463320726281-696a485928c7?ixlib=rb-4.0.3",
                rating: 4.6,
                pages: 443,
                year: 2015,
                price: 16.99,
                originalPrice: 19.99,
                discount: 15,
                description: "An exploration of the history of humankind from the evolution of archaic human species in the Stone Age up to the twenty-first century.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "One hundred thousand years ago, at least six different species of humans inhabited Earth. Yet today there is only onehomo sapiens. What happened to the others? And what may happen to us? Most books about the history of humanity pursue either a historical or a biological approach, but Dr. Yuval Noah Harari breaks the mold with this highly original book that begins about 70,000 years ago with the appearance of modern cognition. From examining the role evolving humans have played in the global ecosystem to charting the rise of empires, Sapiens integrates history and science to reconsider accepted narratives, connect past developments with contemporary concerns, and examine specific events within the context of larger ideas.",
                content: [
                    "One hundred thousand years ago, at least six different species of humans inhabited Earth.",
                    "Yet today there is only onehomo sapiens. What happened to the others? And what may happen to us?",
                    "Most books about the history of humanity pursue either a historical or a biological approach.",
                    "Dr. Yuval Noah Harari breaks the mold with this highly original book that begins about 70,000 years ago with the appearance of modern cognition.",
                    "From examining the role evolving humans have played in the global ecosystem to charting the rise of empires.",
                    "Sapiens integrates history and science to reconsider accepted narratives, connect past developments with contemporary concerns.",
                    "The book examines specific events within the context of larger ideas."
                ]
            },
            {
                id: 8,
                title: "The Innovators",
                author: "Walter Isaacson",
                category: "technology",
                cover: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?ixlib=rb-4.0.3",
                rating: 4.5,
                pages: 560,
                year: 2014,
                price: 17.99,
                description: "A biographical story of the people who created the computer and the Internet, exploring their minds and personalities.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "Following his blockbuster biography of Steve Jobs, Walter Isaacson's New York Times bestselling and critically acclaimed The Innovators is a gripping story of the people who created the computer and the Internet. It is destined to be the standard history of the digital revolution and an indispensable guide to how innovation really happens. What were the talents that allowed certain inventors and entrepreneurs to turn their visionary ideas into disruptive realities? What led to their creative leaps? Why did some succeed and others fail? Isaacson begins with Ada Lovelace, Lord Byron's daughter, who pioneered computer programming in the 1840s. He explores the fascinating personalities that created our current digital revolution.",
                content: [
                    "Following his blockbuster biography of Steve Jobs, Walter Isaacson's The Innovators is a gripping story of the people who created the computer and the Internet.",
                    "It is destined to be the standard history of the digital revolution and an indispensable guide to how innovation really happens.",
                    "What were the talents that allowed certain inventors and entrepreneurs to turn their visionary ideas into disruptive realities?",
                    "What led to their creative leaps? Why did some succeed and others fail?",
                    "Isaacson begins with Ada Lovelace, Lord Byron's daughter, who pioneered computer programming in the 1840s.",
                    "He explores the fascinating personalities that created our current digital revolution."
                ]
            },
            {
                id: 9,
                title: "Guns, Germs, and Steel",
                author: "Jared Diamond",
                category: "history",
                cover: "https://images.unsplash.com/photo-1589994965851-a8f479c573a9?ixlib=rb-4.0.3",
                rating: 4.4,
                pages: 425,
                year: 1997,
                price: 17.99,
                description: "The Fates of Human Societies.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "In this groundbreaking work, evolutionary biologist Jared Diamond stunningly dismantles racially based theories of human history by revealing the environmental factors actually responsible for its broadest patterns. The story begins 13,000 years ago, when Stone Age hunter-gatherers constituted the entire human population. Around that time, the developmental paths of human societies on different continents began to diverge greatly. Early domestication of wild plants and animals in the Fertile Crescent, China, Mesoamerica, the Andes, and other areas gave peoples of those regions a head start at a new way of life. But the localized origins of farming and herding proved to be only part of the explanation for their differing fates.",
                content: [
                    "In this groundbreaking work, evolutionary biologist Jared Diamond dismantles racially based theories of human history.",
                    "He reveals the environmental factors actually responsible for its broadest patterns.",
                    "The story begins 13,000 years ago, when Stone Age hunter-gatherers constituted the entire human population.",
                    "Around that time, the developmental paths of human societies on different continents began to diverge greatly.",
                    "Early domestication of wild plants and animals in the Fertile Crescent, China, Mesoamerica, the Andes gave peoples of those regions a head start.",
                    "But the localized origins of farming and herding proved to be only part of the explanation for their differing fates."
                ]
            },
            {
                id: 10,
                title: "Steve Jobs",
                author: "Walter Isaacson",
                category: "biography",
                cover: "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3",
                rating: 4.6,
                pages: 656,
                year: 2011,
                price: 18.99,
                originalPrice: 24.99,
                discount: 24,
                description: "Based on more than forty interviews with Jobs conducted over two years, this is the definitive biography of the iconic entrepreneur.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Based on more than forty interviews with Steve Jobs conducted over two yearsas well as interviews with more than a hundred family members, friends, adversaries, competitors, and colleaguesWalter Isaacson has written a riveting story of the roller-coaster life and searingly intense personality of a creative entrepreneur whose passion for perfection and ferocious drive revolutionized six industries: personal computers, animated movies, music, phones, tablet computing, and digital publishing. At a time when America is seeking ways to sustain its innovative edge, and when societies around the world are trying to build digital-age economies, Jobs stands as the ultimate icon of inventiveness and applied imagination. He knew that the best way to create value in the twenty-first century was to connect creativity with technology.",
                content: [
                    "Based on more than forty interviews with Steve Jobs conducted over two years.",
                    "Walter Isaacson has written a riveting story of the roller-coaster life and searingly intense personality of a creative entrepreneur.",
                    "Jobs' passion for perfection and ferocious drive revolutionized six industries: personal computers, animated movies, music, phones, tablet computing, and digital publishing.",
                    "At a time when America is seeking ways to sustain its innovative edge, and when societies around the world are trying to build digital-age economies.",
                    "Jobs stands as the ultimate icon of inventiveness and applied imagination.",
                    "He knew that the best way to create value in the twenty-first century was to connect creativity with technology."
                ]
            },
            {
                id: 11,
                title: "The Very Hungry Caterpillar",
                author: "Eric Carle",
                category: "children",
                cover: "https://images.unsplash.com/photo-1589994965851-a8f479c573a9?ixlib=rb-4.0.3",
                rating: 4.9,
                pages: 26,
                year: 1969,
                price: 7.99,
                description: "A picture book that follows the life cycle of a caterpillar as it starts by coming out of its egg, all the way to becoming a butterfly.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "One Sunday morning the warm sun came up and - pop! - out of the egg came a tiny and very hungry caterpillar. He started to look for some food. On Monday he ate through one apple. But he was still hungry. On Tuesday he ate through two pears, but he was still hungry. On Wednesday he ate through three plums, but he was still hungry. On Thursday he ate through four strawberries, but he was still hungry. On Friday he ate through five oranges, but he was still hungry. On Saturday he ate through one piece of chocolate cake, one ice-cream cone, one pickle, one slice of Swiss cheese, one slice of salami, one lollipop, one piece of cherry pie, one sausage, one cupcake, and one slice of watermelon. That night he had a stomachache!",
                content: [
                    "One Sunday morning the warm sun came up and - pop! - out of the egg came a tiny and very hungry caterpillar.",
                    "He started to look for some food.",
                    "On Monday he ate through one apple. But he was still hungry.",
                    "On Tuesday he ate through two pears, but he was still hungry.",
                    "On Wednesday he ate through three plums, but he was still hungry.",
                    "On Thursday he ate through four strawberries, but he was still hungry.",
                    "On Friday he ate through five oranges, but he was still hungry.",
                    "On Saturday he ate through one piece of chocolate cake, one ice-cream cone, one pickle, one slice of Swiss cheese, one slice of salami, one lollipop, one piece of cherry pie, one sausage, one cupcake, and one slice of watermelon.",
                    "That night he had a stomachache!"
                ]
            },
            {
                id: 12,
                title: "The Future of AI",
                author: "Elara Turing",
                category: "technology",
                cover: "https://images.unsplash.com/photo-1677442136019-21780ecad995?ixlib=rb-4.0.3",
                rating: 0,
                pages: 350,
                year: 2025,
                price: 19.99,
                description: "A groundbreaking exploration of artificial intelligence and its potential impact on society, ethics, and human existence.",
                isNew: false,
                isBestseller: false,
                isComingSoon: true,
                fullDescription: "In the not-so-distant future, artificial intelligence will transform every aspect of our lives. This book explores what that future might look like and how we can prepare for it. From healthcare to transportation, education to entertainment, AI is poised to revolutionize industries and redefine human capabilities. But with these advancements come important ethical questions about privacy, employment, and the very nature of consciousness. Drawing on interviews with leading researchers and visionaries, this book provides a comprehensive look at the promises and perils of our AI-powered future.",
                content: [
                    "In the not-so-distant future, artificial intelligence will transform every aspect of our lives.",
                    "This book explores what that future might look like and how we can prepare for it.",
                    "From healthcare to transportation, education to entertainment, AI is poised to revolutionize industries and redefine human capabilities.",
                    "But with these advancements come important ethical questions about privacy, employment, and the very nature of consciousness.",
                    "Drawing on interviews with leading researchers and visionaries.",
                    "This book provides a comprehensive look at the promises and perils of our AI-powered future."
                ]
            },
            {
                id: 13,
                title: "Ocean's Whisper",
                author: "Marina Deepwell",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?ixlib=rb-4.0.3",
                rating: 0,
                pages: 420,
                year: 2025,
                price: 16.99,
                description: "A magical realism novel about a marine biologist who discovers she can communicate with ocean creatures.",
                isNew: false,
                isBestseller: false,
                isComingSoon: true,
                fullDescription: "Elara had always felt a strange connection to the ocean, but she never imagined it would literally speak to her. As a marine biologist working on a remote research station, she makes a discovery that will change everything: she can understand the language of whales, dolphins, and even the mysterious deep-sea creatures that have never been seen by human eyes. But this gift comes with a heavy responsibility, as she becomes the only bridge between humanity and the rapidly deteriorating ocean ecosystem. As she uncovers ancient secrets buried beneath the waves, Elara must race against time to prevent an ecological catastrophe that could change the world forever.",
                content: [
                    "Elara had always felt a strange connection to the ocean, but she never imagined it would literally speak to her.",
                    "As a marine biologist working on a remote research station, she makes a discovery that will change everything.",
                    "She can understand the language of whales, dolphins, and even the mysterious deep-sea creatures that have never been seen by human eyes.",
                    "But this gift comes with a heavy responsibility, as she becomes the only bridge between humanity and the rapidly deteriorating ocean ecosystem.",
                    "As she uncovers ancient secrets buried beneath the waves.",
                    "Elara must race against time to prevent an ecological catastrophe that could change the world forever."
                ]
            },
            {
                id: 14,
                title: "The Psychology of Money",
                author: "Morgan Housel",
                category: "non-fiction",
                cover: "https://images.unsplash.com/photo-1559526324-4b87b5e36e44?ixlib=rb-4.0.3",
                rating: 4.7,
                pages: 256,
                year: 2020,
                price: 14.99,
                originalPrice: 17.99,
                discount: 17,
                description: "Timeless lessons on wealth, greed, and happiness.",
                isNew: true,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Doing well with money isn't necessarily about what you know. It's about how you behave. And behavior is hard to teach, even to really smart people. Moneyinvesting, personal finance, and business decisionsis typically taught as a math-based field, where data and formulas tell us exactly what to do. But in the real world, people don't make financial decisions on a spreadsheet. They make them at the dinner table, or in a meeting room, where personal history, your own unique view of the world, ego, pride, marketing, and odd incentives are scrambled together. In The Psychology of Money, award-winning author Morgan Housel shares 19 short stories exploring the strange ways people think about money and teaches you how to make better sense of one of life's most important topics.",
                content: [
                    "Doing well with money isn't necessarily about what you know. It's about how you behave.",
                    "And behavior is hard to teach, even to really smart people.",
                    "Moneyinvesting, personal finance, and business decisionsis typically taught as a math-based field.",
                    "But in the real world, people don't make financial decisions on a spreadsheet.",
                    "They make them at the dinner table, or in a meeting room, where personal history, your own unique view of the world, ego, pride, marketing, and odd incentives are scrambled together.",
                    "In The Psychology of Money, award-winning author Morgan Housel shares 19 short stories exploring the strange ways people think about money.",
                    "He teaches you how to make better sense of one of life's most important topics."
                ]
            },
            {
                id: 15,
                title: "The Seven Husbands of Evelyn Hugo",
                author: "Taylor Jenkins Reid",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1543002588-bfa74002ed7e?ixlib=rb-4.0.3",
                rating: 4.5,
                pages: 389,
                year: 2017,
                price: 13.99,
                description: "Aging and reclusive Hollywood movie icon Evelyn Hugo is finally ready to tell the truth about her glamorous and scandalous life.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Aging and reclusive Hollywood movie icon Evelyn Hugo is finally ready to tell the truth about her glamorous and scandalous life. But when she chooses unknown magazine reporter Monique Grant for the job, no one is more astounded than Monique herself. Why her? Why now? Monique is not exactly on top of the world. Her husband has left her, and her professional life is going nowhere. Regardless of why Evelyn has selected her to write her biography, Monique is determined to use this opportunity to jumpstart her career. Summoned to Evelyn's luxurious apartment, Monique listens in fascination as the actress tells her story. From making her way to Los Angeles in the 1950s to her decision to leave show business in the '80s, and, of course, the seven husbands along the way, Evelyn unspools a tale of ruthless ambition, unexpected friendship, and a great forbidden love.",
                content: [
                    "Aging and reclusive Hollywood movie icon Evelyn Hugo is finally ready to tell the truth about her glamorous and scandalous life.",
                    "But when she chooses unknown magazine reporter Monique Grant for the job, no one is more astounded than Monique herself.",
                    "Why her? Why now? Monique is not exactly on top of the world.",
                    "Her husband has left her, and her professional life is going nowhere.",
                    "Regardless of why Evelyn has selected her to write her biography, Monique is determined to use this opportunity to jumpstart her career.",
                    "Summoned to Evelyn's luxurious apartment, Monique listens in fascination as the actress tells her story.",
                    "From making her way to Los Angeles in the 1950s to her decision to leave show business in the '80s.",
                    "And, of course, the seven husbands along the way, Evelyn unspools a tale of ruthless ambition, unexpected friendship, and a great forbidden love."
                ]
            },
            {
                id: 16,
                title: "Thinking, Fast and Slow",
                author: "Daniel Kahneman",
                category: "non-fiction",
                cover: "https://images.unsplash.com/photo-1559526324-4b87b5e36e44?ixlib=rb-4.0.3",
                rating: 4.2,
                pages: 499,
                year: 2011,
                price: 16.49,
                originalPrice: 19.99,
                discount: 18,
                description: "The author takes us on a groundbreaking tour of the mind and explains the two systems that drive the way we think.",
                isNew: false,
                isBestseller: false,
                isComingSoon: false,
                fullDescription: "In the highly anticipated Thinking, Fast and Slow, Kahneman takes us on a groundbreaking tour of the mind and explains the two systems that drive the way we think. System 1 is fast, intuitive, and emotional; System 2 is slower, more deliberative, and more logical. Kahneman exposes the extraordinary capabilitiesand also the faults and biasesof fast thinking, and reveals the pervasive influence of intuitive impressions on our thoughts and behavior. The impact of loss aversion and overconfidence on corporate strategies, the difficulties of predicting what will make us happy in the future, the profound effect of cognitive biases on everything from playing the stock market to planning our next vacationeach of these can be understood only by knowing how the two systems shape our judgments and decisions.",
                content: [
                    "In Thinking, Fast and Slow, Kahneman takes us on a groundbreaking tour of the mind.",
                    "He explains the two systems that drive the way we think.",
                    "System 1 is fast, intuitive, and emotional; System 2 is slower, more deliberative, and more logical.",
                    "Kahneman exposes the extraordinary capabilitiesand also the faults and biasesof fast thinking.",
                    "He reveals the pervasive influence of intuitive impressions on our thoughts and behavior.",
                    "The impact of loss aversion and overconfidence on corporate strategies.",
                    "The difficulties of predicting what will make us happy in the future.",
                    "The profound effect of cognitive biases on everything from playing the stock market to planning our next vacation."
                ]
            },
            {
                id: 17,
                title: "Dune",
                author: "Frank Herbert",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1629992101753-56d196c8aabb?ixlib=rb-4.0.3",
                rating: 4.7,
                pages: 412,
                year: 1965,
                price: 14.99,
                description: "A science fiction novel set in the distant future amidst a feudal interstellar society.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "Set in the distant future amidst a feudal interstellar society in which various noble houses control planetary fiefs, Dune tells the story of young Paul Atreides, whose family accepts the stewardship of the planet Arrakis. While the planet is an inhospitable and sparsely populated desert wasteland, it is the only source of melange, or 'spice', a drug that extends life and enhances mental abilities. Melange is also necessary for space navigation, which requires a kind of multidimensional awareness and foresight that only the drug provides. As melange can only be produced on Arrakis, control of the planet is a coveted and dangerous undertaking. The story explores the multilayered interactions of politics, religion, ecology, technology, and human emotion, as the factions of the empire confront each other in a struggle for the control of Arrakis and its spice.",
                content: [
                    "Set in the distant future amidst a feudal interstellar society in which various noble houses control planetary fiefs.",
                    "Dune tells the story of young Paul Atreides, whose family accepts the stewardship of the planet Arrakis.",
                    "While the planet is an inhospitable and sparsely populated desert wasteland, it is the only source of melange, or 'spice'.",
                    "Melange is a drug that extends life and enhances mental abilities, and is necessary for space navigation.",
                    "As melange can only be produced on Arrakis, control of the planet is a coveted and dangerous undertaking.",
                    "The story explores the multilayered interactions of politics, religion, ecology, technology, and human emotion.",
                    "The factions of the empire confront each other in a struggle for the control of Arrakis and its spice."
                ]
            },
            {
                id: 18,
                title: "The Hobbit",
                author: "J.R.R. Tolkien",
                category: "fiction",
                cover: "https://images.unsplash.com/photo-1544947950-fa07a98d237f?ixlib=rb-4.0.3",
                rating: 4.8,
                pages: 310,
                year: 1937,
                price: 12.99,
                description: "A fantasy novel about the adventures of hobbit Bilbo Baggins.",
                isNew: false,
                isBestseller: true,
                isComingSoon: false,
                fullDescription: "The Hobbit is set in a time 'between the Dawn of Frie and the Dominion of Men', and follows the quest of home-loving Bilbo Baggins, the titular hobbit, to win a share of the treasure guarded by Smaug the dragon. Bilbo's journey takes him from light-hearted, rural surroundings into more sinister territory. The story is told in the form of an episodic quest, and most chapters introduce a specific creature or type of creature of Tolkien's geography. Bilbo gains a new level of maturity, competence, and wisdom by accepting the disreputable, romantic, fey, and adventurous sides of his nature and applying his wits and common sense. The story reaches its climax in the Battle of the Five Armies, where many of the characters and creatures from earlier chapters re-emerge to engage in conflict.",
                content: [
                    "The Hobbit is set in a time 'between the Dawn of Frie and the Dominion of Men'.",
                    "It follows the quest of home-loving Bilbo Baggins, the titular hobbit, to win a share of the treasure guarded by Smaug the dragon.",
                    "Bilbo's journey takes him from light-hearted, rural surroundings into more sinister territory.",
                    "The story is told in the form of an episodic quest, and most chapters introduce a specific creature or type of creature.",
                    "Bilbo gains a new level of maturity, competence, and wisdom by accepting the adventurous sides of his nature.",
                    "The story reaches its climax in the Battle of the Five Armies.",
                    "Many of the characters and creatures from earlier chapters re-emerge to engage in conflict."
                ]
            }
        ];

        // Application state
        let currentUser = null;
        let cart = [];
        let favorites = [];
        let purchasedBooks = [];
        let orders = [];
        let currentCategory = 'all';
        let currentTab = 'all';
        let currentFilter = 'all';
        let currentBookForPurchase = null;
        let currentReadingBook = null;
        let currentPage = 1;
        let currentOnboardingStep = 1;
        let confirmationCallback = null;
        let selectedRating = 0;
        let achievements = [];
        let userDetails = {
            name: '',
            email: '',
            address: '',
            city: '',
            state: '',
            zip: '',
            phone: ''
        };

        // DOM Elements
        const booksGrid = document.getElementById('booksGrid');
        const cartSection = document.getElementById('cartSection');
        const cartItems = document.getElementById('cartItems');
        const cartCount = document.getElementById('cartCount');
        const cartSubtotal = document.getElementById('cartSubtotal');
        const cartTax = document.getElementById('cartTax');
        const cartDiscount = document.getElementById('cartDiscount');
        const cartTotal = document.getElementById('cartTotal');
        const cartLink = document.getElementById('cartLink');
        const ordersLink = document.getElementById('ordersLink');
        const mainContent = document.getElementById('mainContent');
        const dashboard = document.getElementById('dashboard');
        const ordersSection = document.getElementById('ordersSection');
        const trace = document.getElementById('trace');
        const traceCurrent = document.getElementById('traceCurrent');
        const newArrivalsCarousel = document.getElementById('newArrivalsCarousel');
        const comingSoonCarousel = document.getElementById('comingSoonCarousel');
        const purchasedBooksGrid = document.getElementById('purchasedBooksGrid');
        const favoritesGrid = document.getElementById('favoritesGrid');
        const purchasedCount = document.getElementById('purchasedCount');
        const favoritesCount = document.getElementById('favoritesCount');
        const readingTime = document.getElementById('readingTime');
        const pointsEarned = document.getElementById('pointsEarned');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        const toastIcon = document.getElementById('toastIcon');
        const navLinks = document.querySelectorAll('.nav-link');
        const sectionTabs = document.querySelectorAll('.section-tab');
        const filterBtns = document.querySelectorAll('.filter-btn');
        const searchInput = document.getElementById('searchInput');
        const searchButton = document.getElementById('searchButton');
        const bookDetailsModal = document.getElementById('bookDetailsModal');
        const bookDetailsContent = document.getElementById('bookDetailsContent');
        const paymentModal = document.getElementById('paymentModal');
        const paymentBookTitle = document.getElementById('paymentBookTitle');
        const paymentBookPrice = document.getElementById('paymentBookPrice');
        const paymentMethods = document.querySelectorAll('.payment-method');
        const paymentDetails = document.querySelectorAll('.payment-details');
        const completePayment = document.getElementById('completePayment');
        const orderTrackingModal = document.getElementById('orderTrackingModal');
        const orderTrackingContent = document.getElementById('orderTrackingContent');
        const activeOrders = document.getElementById('activeOrders');
        const orderHistory = document.getElementById('orderHistory');
        const readBookModal = document.getElementById('readBookModal');
        const readerTitle = document.getElementById('readerTitle');
        const readerContent = document.getElementById('readerContent');
        const prevPage = document.getElementById('prevPage');
        const nextPage = document.getElementById('nextPage');
        const currentPageElement = document.getElementById('currentPage');
        const totalPagesElement = document.getElementById('totalPages');
        const decreaseFont = document.getElementById('decreaseFont');
        const increaseFont = document.getElementById('increaseFont');
        const authModal = document.getElementById('authModal');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const showSignup = document.getElementById('showSignup');
        const showLogin = document.getElementById('showLogin');
        const loginBtn = document.getElementById('loginBtn');
        const signupBtn = document.getElementById('signupBtn');
        const themeToggle = document.getElementById('themeToggle');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const welcomeText = document.getElementById('welcomeText');
        const confirmationModal = document.getElementById('confirmationModal');
        const confirmationTitle = document.getElementById('confirmationTitle');
        const confirmationMessage = document.getElementById('confirmationMessage');
        const cancelAction = document.getElementById('cancelAction');
        const confirmAction = document.getElementById('confirmAction');
        const onboardingGuide = document.getElementById('onboardingGuide');
        const skipOnboarding = document.getElementById('skipOnboarding');
        const finishOnboarding = document.getElementById('finishOnboarding');
        const keyboardShortcutsModal = document.getElementById('keyboardShortcutsModal');
        const feedbackModal = document.getElementById('feedbackModal');
        const ratingStars = document.querySelectorAll('.rating-star');
        const submitFeedback = document.getElementById('submitFeedback');
        const achievementsContainer = document.getElementById('achievements');
        const policySection = document.getElementById('policySection');

        // Initialize the application
        function init() {
            loadUserData();
            displayBooks();
            displayNewArrivalsCarousel();
            displayComingSoonCarousel();
            updateCart();
            setupEventListeners();
            
            // Create sample orders for demo
            createSampleOrders();
            
            // Show onboarding for new users
            if (!localStorage.getItem('booknest_onboarding_completed')) {
                setTimeout(() => {
                    showOnboarding();
                }, 1000);
            }
            
            // Initialize achievements
            initAchievements();
            
            // Initialize enhanced transitions
            initEnhancedTransitions();
        }

        // Initialize enhanced transitions
        function initEnhancedTransitions() {
            // Add show class to page sections with delay
            document.querySelectorAll('.page-section').forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('show');
                }, 200 * index);
            });
            
            // Add show class to modals when displayed
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('show');
                    }
                });
            });
        }

        // Initialize achievements
        function initAchievements() {
            achievements = [
                { id: 'first-book', name: 'First Book', description: 'Purchased your first book', icon: 'fa-book-reader', unlocked: false },
                { id: 'bookworm', name: 'Bookworm', description: 'Purchased 5 books', icon: 'fa-fire', unlocked: false },
                { id: 'reading-streak', name: 'Reading Streak', description: 'Read for 7 days in a row', icon: 'fa-trophy', unlocked: false },
                { id: 'genre-explorer', name: 'Genre Explorer', description: 'Read books from 5 different genres', icon: 'fa-globe', unlocked: false },
                { id: 'speed-reader', name: 'Speed Reader', description: 'Read 100 pages in one day', icon: 'fa-bolt', unlocked: false },
                { id: 'library-owner', name: 'Library Owner', description: 'Have 10 books in your collection', icon: 'fa-book', unlocked: false },
                { id: 'reviewer', name: 'Reviewer', description: 'Rate 5 books', icon: 'fa-star', unlocked: false },
                { id: 'completionist', name: 'Completionist', description: 'Complete reading 10 books', icon: 'fa-award', unlocked: false }
            ];
            
            updateAchievementsDisplay();
        }

        // Update achievements display
        function updateAchievementsDisplay() {
            achievementsContainer.innerHTML = '';
            achievements.forEach(achievement => {
                const badge = document.createElement('div');
                badge.className = `achievement-badge ${achievement.unlocked ? 'unlocked' : 'locked'}`;
                badge.style.background = achievement.unlocked ? 'var(--success)' : 'var(--text-light)';
                badge.innerHTML = `
                    <i class="fas ${achievement.icon}"></i>
                    <span>${achievement.name}</span>
                `;
                achievementsContainer.appendChild(badge);
            });
        }

        // Check and unlock achievements
        function checkAchievements() {
            // Check First Book achievement
            if (purchasedBooks.length >= 1) {
                unlockAchievement('first-book');
            }
            
            // Check Bookworm achievement
            if (purchasedBooks.length >= 5) {
                unlockAchievement('bookworm');
            }
            
            // Check Library Owner achievement
            if (purchasedBooks.length >= 10) {
                unlockAchievement('library-owner');
            }
            
            // Update achievements display
            updateAchievementsDisplay();
            saveUserData();
        }

        // Unlock an achievement
        function unlockAchievement(achievementId) {
            const achievement = achievements.find(a => a.id === achievementId);
            if (achievement && !achievement.unlocked) {
                achievement.unlocked = true;
                showToast(`Achievement Unlocked: ${achievement.name}!`, 'info');
            }
        }

        // Load user data from localStorage
        function loadUserData() {
            const savedUser = localStorage.getItem('booknest_user');
            const savedCart = localStorage.getItem('booknest_cart');
            const savedFavorites = localStorage.getItem('booknest_favorites');
            const savedPurchased = localStorage.getItem('booknest_purchased');
            const savedTheme = localStorage.getItem('booknest_theme');
            const savedAchievements = localStorage.getItem('booknest_achievements');
            const savedUserDetails = localStorage.getItem('booknest_user_details');
            
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('signInLink').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
            }
            
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
            
            if (savedFavorites) {
                favorites = JSON.parse(savedFavorites);
            }
            
            if (savedPurchased) {
                purchasedBooks = JSON.parse(savedPurchased);
            }
            
            if (savedAchievements) {
                achievements = JSON.parse(savedAchievements);
            }
            
            if (savedUserDetails) {
                userDetails = JSON.parse(savedUserDetails);
            }
            
            if (savedTheme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // Check achievements after loading data
            checkAchievements();
        }

        // Save user data to localStorage
        function saveUserData() {
            localStorage.setItem('booknest_user', JSON.stringify(currentUser));
            localStorage.setItem('booknest_cart', JSON.stringify(cart));
            localStorage.setItem('booknest_favorites', JSON.stringify(favorites));
            localStorage.setItem('booknest_purchased', JSON.stringify(purchasedBooks));
            localStorage.setItem('booknest_achievements', JSON.stringify(achievements));
            localStorage.setItem('booknest_user_details', JSON.stringify(userDetails));
        }

        // Set up event listeners
        function setupEventListeners() {
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const category = this.getAttribute('data-category');
                    setActiveCategory(category);
                });
            });

            // Section tabs
            sectionTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    setActiveTab(tabName);
                });
            });

            // Filter buttons
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    setActiveFilter(filter);
                });
            });

            // User actions
            document.getElementById('homeLink').addEventListener('click', showMainContent);
            document.getElementById('cartLink').addEventListener('click', showCart);
            document.getElementById('favoritesLink').addEventListener('click', showFavorites);
            document.getElementById('ordersLink').addEventListener('click', showOrders);
            document.getElementById('signInLink').addEventListener('click', openAuthModal);
            document.getElementById('exploreBtn').addEventListener('click', showMainContent);
            document.getElementById('checkoutBtn').addEventListener('click', checkout);

            // Footer links
            document.querySelector('footer').addEventListener('click', function(e) {
                if (e.target.classList.contains('footer-link')) {
                    e.preventDefault();
                    const action = e.target.getAttribute('data-action');
                    handleFooterAction(action);
                }
            });

            // Search
            searchButton.addEventListener('click', handleSearch);
            searchInput.addEventListener('keyup', function(e) {
                if (e.key === 'Enter') handleSearch();
            });

            // Payment methods
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    const methodType = this.getAttribute('data-method');
                    setActivePaymentMethod(methodType);
                });
            });

            // Complete payment
            completePayment.addEventListener('click', processPayment);

            // Close modals
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    closeModal(modal);
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                if (event.target.classList.contains('modal')) {
                    closeModal(event.target);
                }
            });

            // Reader controls
            prevPage.addEventListener('click', goToPreviousPage);
            nextPage.addEventListener('click', goToNextPage);
            decreaseFont.addEventListener('click', decreaseFontSize);
            increaseFont.addEventListener('click', increaseFontSize);

            // Auth modal
            showSignup.addEventListener('click', function(e) {
                e.preventDefault();
                loginForm.style.display = 'none';
                signupForm.style.display = 'block';
            });

            showLogin.addEventListener('click', function(e) {
                e.preventDefault();
                signupForm.style.display = 'none';
                loginForm.style.display = 'block';
            });

            loginBtn.addEventListener('click', handleLogin);
            signupBtn.addEventListener('click', handleSignup);

            // Theme toggle
            themeToggle.addEventListener('click', toggleTheme);

            // Confirmation dialog
            cancelAction.addEventListener('click', function() {
                closeModal(confirmationModal);
            });

            confirmAction.addEventListener('click', function() {
                if (confirmationCallback) {
                    confirmationCallback();
                }
                closeModal(confirmationModal);
            });

            // Onboarding
            skipOnboarding.addEventListener('click', skipOnboardingGuide);
            finishOnboarding.addEventListener('click', finishOnboardingGuide);

            // Keyboard shortcuts
            document.addEventListener('keydown', handleKeyboardShortcuts);

            // Feedback rating
            ratingStars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.getAttribute('data-rating'));
                    setRating(rating);
                });
            });

            // Submit feedback
            submitFeedback.addEventListener('click', submitFeedbackForm);
        }

        // Set rating for feedback
        function setRating(rating) {
            selectedRating = rating;
            ratingStars.forEach(star => {
                const starRating = parseInt(star.getAttribute('data-rating'));
                if (starRating <= rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Submit feedback form
        function submitFeedbackForm() {
            const name = document.getElementById('feedbackName').value;
            const email = document.getElementById('feedbackEmail').value;
            const message = document.getElementById('feedbackMessage').value;

            if (!name || !email || !message) {
                showToast('Please fill in all fields', 'error');
                return;
            }

            if (selectedRating === 0) {
                showToast('Please select a rating', 'error');
                return;
            }

            // In a real app, you would send this data to a server
            showToast('Thank you for your feedback!', 'success');
            closeModal(feedbackModal);

            // Reset form
            document.getElementById('feedbackName').value = '';
            document.getElementById('feedbackEmail').value = '';
            document.getElementById('feedbackMessage').value = '';
            setRating(0);
        }

        // Handle keyboard shortcuts
        function handleKeyboardShortcuts(e) {
            // Ctrl+K for search
            if (e.ctrlKey && e.key === 'k') {
                e.preventDefault();
                searchInput.focus();
            }
            
            // Esc to close modals
            if (e.key === 'Escape') {
                const openModal = document.querySelector('.modal[style*="display: flex"]');
                if (openModal) {
                    closeModal(openModal);
                }
            }
            
            // Ctrl+H for home
            if (e.ctrlKey && e.key === 'h') {
                e.preventDefault();
                showMainContent();
            }
            
            // Ctrl+C for cart
            if (e.ctrlKey && e.key === 'c') {
                e.preventDefault();
                showCart();
            }
            
            // Ctrl+D for dark mode
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                toggleTheme();
            }
            
            // ? for keyboard shortcuts help
            if (e.key === '?') {
                e.preventDefault();
                keyboardShortcutsModal.style.display = 'flex';
            }
        }

        // Toggle theme
        function toggleTheme() {
            if (document.documentElement.getAttribute('data-theme') === 'dark') {
                document.documentElement.removeAttribute('data-theme');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                localStorage.setItem('booknest_theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                localStorage.setItem('booknest_theme', 'dark');
            }
        }

        // Show onboarding guide
        function showOnboarding() {
            onboardingGuide.style.display = 'flex';
            currentOnboardingStep = 1;
            showOnboardingStep(1);
        }

        // Show specific onboarding step
        function showOnboardingStep(step) {
            document.querySelectorAll('.onboarding-step').forEach(s => {
                s.style.display = 'none';
            });
            document.getElementById(`onboardingStep${step}`).style.display = 'block';
            
            // Update button events
            document.querySelectorAll('.next-btn').forEach(btn => {
                btn.onclick = function() {
                    const nextStep = parseInt(this.getAttribute('data-next'));
                    showOnboardingStep(nextStep);
                };
            });
            
            document.querySelectorAll('.prev-btn').forEach(btn => {
                btn.onclick = function() {
                    const prevStep = parseInt(this.getAttribute('data-prev'));
                    showOnboardingStep(prevStep);
                };
            });
        }

        // Skip onboarding
        function skipOnboardingGuide() {
            onboardingGuide.style.display = 'none';
            localStorage.setItem('booknest_onboarding_completed', 'true');
        }

        // Finish onboarding
        function finishOnboardingGuide() {
            onboardingGuide.style.display = 'none';
            localStorage.setItem('booknest_onboarding_completed', 'true');
            showToast('Welcome to BookNest! Start exploring our collection.', 'info');
        }

        // Handle login
        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            // Simulate login
            currentUser = {
                name: 'Demo User',
                email: email
            };
            
            localStorage.setItem('booknest_user', JSON.stringify(currentUser));
            document.getElementById('signInLink').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
            closeModal(authModal);
            
            // Show welcome message
            welcomeText.textContent = `Welcome back, ${currentUser.name}! You have ${Math.floor(Math.random() * 5)} new notifications.`;
            welcomeMessage.style.display = 'flex';
            
            showToast(`Welcome back, ${currentUser.name}!`, 'success');
        }

        // Handle signup
        function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!name || !email || !password || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            // Simulate signup
            currentUser = {
                name: name,
                email: email
            };
            
            localStorage.setItem('booknest_user', JSON.stringify(currentUser));
            document.getElementById('signInLink').innerHTML = `<i class="fas fa-user"></i> ${currentUser.name}`;
            closeModal(authModal);
            
            // Show welcome message
            welcomeText.textContent = `Welcome to BookNest, ${currentUser.name}! Start exploring our collection.`;
            welcomeMessage.style.display = 'flex';
            
            showToast(`Account created successfully! Welcome, ${currentUser.name}!`, 'success');
        }

        // Show confirmation dialog
        function showConfirmation(title, message, callback) {
            confirmationTitle.textContent = title;
            confirmationMessage.textContent = message;
            confirmationCallback = callback;
            confirmationModal.style.display = 'flex';
            confirmationModal.classList.add('show');
        }

        // Handle footer actions
        function handleFooterAction(action) {
            switch(action) {
                case 'home':
                case 'browse':
                    showMainContent();
                    break;
                case 'new':
                    showMainContent();
                    // Scroll to new arrivals
                    setTimeout(() => {
                        document.getElementById('newArrivalsSection').scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }, 100);
                    break;
                case 'popular':
                    showMainContent();
                    setActiveTab('bestsellers');
                    break;
                case 'account':
                    if (!currentUser) {
                        showToast('Please sign in to access your account', 'error');
                        openAuthModal();
                    } else {
                        showDashboard();
                    }
                    break;
                case 'faq':
                    openFAQModal();
                    break;
                case 'borrowing':
                    openBorrowingGuideModal();
                    break;
                case 'contact':
                    openContactModal();
                    break;
                case 'privacy':
                    openPrivacyModal();
                    break;
                case 'terms':
                    openTermsModal();
                    break;
                case 'return-policy':
                    showMainContent();
                    // Scroll to return policy section
                    setTimeout(() => {
                        policySection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }, 100);
                    break;
                case 'warranty':
                    showMainContent();
                    // Scroll to warranty section
                    setTimeout(() => {
                        policySection.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }, 100);
                    break;
                case 'feedback':
                    feedbackModal.style.display = 'flex';
                    feedbackModal.classList.add('show');
                    break;
                default:
                    showMainContent();
            }
        }

        // Modal functions for footer links
        function openFAQModal() {
            const modalContent = `
                <div class="modal-header">
                    <h2>Frequently Asked Questions</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px; max-height: 70vh; overflow-y: auto;">
                    <div class="faq-item" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">How do I borrow a book?</h3>
                        <p>Simply click the "Add to Cart" button on any available book, then proceed to checkout. After payment, the book will be available in your library.</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">What payment methods do you accept?</h3>
                        <p>We accept credit/debit cards, EasyPaisa, JazzCash, and bank transfers.</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">Can I read books offline?</h3>
                        <p>Yes! Once purchased, you can download books for offline reading through our mobile app.</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #eee;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">How long can I keep borrowed books?</h3>
                        <p>Purchased books are yours to keep forever in your digital library.</p>
                    </div>
                    <div class="faq-item" style="margin-bottom: 20px;">
                        <h3 style="color: var(--primary); margin-bottom: 10px;">Do you offer refunds?</h3>
                        <p>We offer refunds within 7 days of purchase if you're not satisfied with your book.</p>
                    </div>
                </div>
            `;
            showCustomModal(modalContent);
        }

        function openBorrowingGuideModal() {
            const modalContent = `
                <div class="modal-header">
                    <h2>Borrowing Guide</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px; max-height: 70vh; overflow-y: auto;">
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">How to Borrow Books</h3>
                        <ol style="padding-left: 20px; line-height: 1.6;">
                            <li style="margin-bottom: 10px;">Browse our collection and find books you're interested in</li>
                            <li style="margin-bottom: 10px;">Click "Add to Cart" for each book you want to borrow</li>
                            <li style="margin-bottom: 10px;">Review your cart and proceed to checkout</li>
                            <li style="margin-bottom: 10px;">Complete the payment process</li>
                            <li style="margin-bottom: 10px;">Access your books immediately in your library</li>
                        </ol>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">Borrowing Limits</h3>
                        <ul style="padding-left: 20px; line-height: 1.6;">
                            <li style="margin-bottom: 10px;">You can borrow up to 10 books at a time</li>
                            <li style="margin-bottom: 10px;">Books are available for unlimited reading time</li>
                            <li style="margin-bottom: 10px;">You can purchase additional books anytime</li>
                        </ul>
                    </div>
                </div>
            `;
            showCustomModal(modalContent);
        }

        function openContactModal() {
            const modalContent = `
                <div class="modal-header">
                    <h2>Contact Us</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px;">
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">Get in Touch</h3>
                        <p style="margin-bottom: 15px;">We'd love to hear from you! Here's how you can reach us:</p>
                        
                        <div style="display: grid; gap: 15px; margin-bottom: 25px;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-envelope" style="color: var(--secondary);"></i>
                                <span>support@booknest.com</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-phone" style="color: var(--secondary);"></i>
                                <span>+1 (555) 123-4567</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-map-marker-alt" style="color: var(--secondary);"></i>
                                <span>123 Library Street, Bookville, BK 12345</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="color: var(--primary); margin-bottom: 15px;">Send us a Message</h3>
                        <form id="contactForm">
                            <div class="form-group">
                                <label for="contactName">Your Name</label>
                                <input type="text" id="contactName" required>
                            </div>
                            <div class="form-group">
                                <label for="contactEmail">Email Address</label>
                                <input type="email" id="contactEmail" required>
                            </div>
                            <div class="form-group">
                                <label for="contactMessage">Message</label>
                                <textarea id="contactMessage" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn btn-enhanced">Send Message</button>
                        </form>
                    </div>
                </div>
            `;
            showCustomModal(modalContent);
            
            // Add form submission handler
            setTimeout(() => {
                document.getElementById('contactForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    showToast('Thank you for your message! We\'ll get back to you soon.', 'success');
                    closeModal(document.querySelector('.modal.show'));
                });
            }, 100);
        }

        function openPrivacyModal() {
            const modalContent = `
                <div class="modal-header">
                    <h2>Privacy Policy</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px; max-height: 70vh; overflow-y: auto;">
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">1. Information We Collect</h3>
                        <p>We collect information you provide directly to us, such as when you create an account, make a purchase, or contact us for support.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">2. How We Use Your Information</h3>
                        <p>We use the information we collect to provide, maintain, and improve our services, process transactions, and communicate with you.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">3. Information Sharing</h3>
                        <p>We do not sell your personal information to third parties. We may share information with service providers who assist us in operating our platform.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">4. Data Security</h3>
                        <p>We implement appropriate security measures to protect your personal information from unauthorized access and disclosure.</p>
                    </div>
                </div>
            `;
            showCustomModal(modalContent);
        }

        function openTermsModal() {
            const modalContent = `
                <div class="modal-header">
                    <h2>Terms of Service</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px; max-height: 70vh; overflow-y: auto;">
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">1. Acceptance of Terms</h3>
                        <p>By accessing and using BookNest, you accept and agree to be bound by the terms and provision of this agreement.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">2. Use License</h3>
                        <p>Permission is granted to temporarily access our digital books for personal, non-commercial transitory viewing only.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">3. Account Responsibility</h3>
                        <p>You are responsible for maintaining the confidentiality of your account and password and for restricting access to your computer.</p>
                    </div>
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">4. Service Modifications</h3>
                        <p>BookNest reserves the right to modify or discontinue, temporarily or permanently, the service with or without notice.</p>
                    </div>
                </div>
            `;
            showCustomModal(modalContent);
        }

        // Generic modal function
        function showCustomModal(content) {
            // Create modal if it doesn't exist
            let modal = document.getElementById('customModal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'customModal';
                modal.className = 'modal';
                modal.innerHTML = `
                    <div class="modal-content">
                        ${content}
                    </div>
                `;
                document.body.appendChild(modal);
                
                // Add close event
                modal.addEventListener('click', function(e) {
                    if (e.target.classList.contains('modal') || e.target.classList.contains('close-modal')) {
                        closeModal(modal);
                    }
                });
            } else {
                modal.querySelector('.modal-content').innerHTML = content;
            }
            
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
        }

        // Set active category
        function setActiveCategory(category) {
            currentCategory = category;
            
            // Update navigation
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-category') === category) {
                    link.classList.add('active');
                }
            });
            
            // Update trace
            traceCurrent.textContent = category === 'all' ? 'All Books' : category.charAt(0).toUpperCase() + category.slice(1);
            
            // Display books
            displayBooks();
        }

        // Set active tab
        function setActiveTab(tab) {
            currentTab = tab;
            
            // Update tabs
            sectionTabs.forEach(t => {
                t.classList.remove('active');
                if (t.getAttribute('data-tab') === tab) {
                    t.classList.add('active');
                }
            });
            
            // Display books
            displayBooks();
        }

        // Set active filter
        function setActiveFilter(filter) {
            currentFilter = filter;
            
            // Update filter buttons
            filterBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-filter') === filter) {
                    btn.classList.add('active');
                }
            });
            
            // Display books
            displayBooks();
        }

        // Display books based on current filters
        function displayBooks() {
            let filteredBooks = books;
            
            // Filter by category
            if (currentCategory !== 'all') {
                filteredBooks = filteredBooks.filter(book => book.category === currentCategory);
            }
            
            // Filter by tab
            if (currentTab === 'bestsellers') {
                filteredBooks = filteredBooks.filter(book => book.isBestseller);
            } else if (currentTab === 'recommended') {
                // In a real app, this would be based on user preferences
                filteredBooks = filteredBooks.filter(book => book.rating >= 4.5);
            } else if (currentTab === 'discounted') {
                // Filter books that have a discount
                filteredBooks = filteredBooks.filter(book => book.originalPrice);
            }
            
            // Filter by filter button
            if (currentFilter !== 'all') {
                filteredBooks = filteredBooks.filter(book => book.category === currentFilter);
            }
            
            // Render books
            booksGrid.innerHTML = filteredBooks.map(book => createBookCard(book)).join('');
            
            // Add event listeners to book cards
            document.querySelectorAll('.book-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.closest('.book-actions')) {
                        const bookId = parseInt(this.getAttribute('data-id'));
                        openBookDetails(bookId);
                    }
                });
            });
        }

        // Create book card HTML
        function createBookCard(book) {
            const isFavorited = favorites.includes(book.id);
            const isInCart = cart.some(item => item.id === book.id);
            const isPurchased = purchasedBooks.some(item => item.id === book.id);
            
            return `
                <div class="book-card fade-in" data-id="${book.id}">
                    ${book.isComingSoon ? '<div class="category-tag" style="background: var(--purple);">Coming Soon</div>' : 
                      book.isBestseller ? '<div class="category-tag" style="background: var(--warning);">Bestseller</div>' : 
                      book.isNew ? '<div class="category-tag" style="background: var(--success);">New</div>' : 
                      `<div class="category-tag">${book.category.charAt(0).toUpperCase() + book.category.slice(1)}</div>`}
                    <div class="book-cover" style="background-image: url('${book.cover}')"></div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">by ${book.author}</p>
                        <div class="rating-stars">
                            ${generateStarRating(book.rating)}
                            <span>${book.rating > 0 ? book.rating : 'Not rated'}</span>
                        </div>
                        <div class="book-meta">
                            <span><i class="fas fa-book"></i> ${book.pages} pages</span>
                            <span>${book.year}</span>
                        </div>
                        <div class="book-price">
                            ${book.originalPrice ? 
                                `<span class="original-price">$${book.originalPrice}</span>` : 
                                ''}
                            $${book.price}
                            ${book.originalPrice ? 
                                `<span class="discount-badge">${book.discount}% OFF</span>` : 
                                ''}
                        </div>
                        <div class="book-actions">
                            <button class="borrow-btn btn-enhanced ${isInCart ? 'purchased' : ''}" 
                                onclick="addToCart(${book.id})" 
                                ${book.isComingSoon ? 'disabled' : ''}>
                                <i class="fas ${isInCart ? 'fa-check' : 'fa-shopping-cart'}"></i>
                                ${isInCart ? 'In Cart' : book.isComingSoon ? 'Pre-Order' : 'Add to Cart'}
                            </button>
                            <button class="favorite-btn ${isFavorited ? 'active' : ''}" onclick="toggleFavorite(${book.id})">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Generate star rating HTML
        function generateStarRating(rating) {
            if (rating === 0) return '';
            
            let stars = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    stars += '<i class="fas fa-star"></i>';
                } else if (i === fullStars && halfStar) {
                    stars += '<i class="fas fa-star-half-alt"></i>';
                } else {
                    stars += '<i class="far fa-star"></i>';
                }
            }
            
            return stars;
        }

        // Display new arrivals in carousel
        function displayNewArrivalsCarousel() {
            const newArrivals = books.filter(book => book.isNew);
            newArrivalsCarousel.innerHTML = newArrivals.map(book => createCarouselItem(book)).join('');
            
            // Add click events to carousel items
            document.querySelectorAll('.carousel-item').forEach(item => {
                item.addEventListener('click', function() {
                    const bookId = parseInt(this.getAttribute('data-id'));
                    openBookDetails(bookId);
                });
            });
        }

        // Display coming soon in carousel
        function displayComingSoonCarousel() {
            const comingSoon = books.filter(book => book.isComingSoon);
            comingSoonCarousel.innerHTML = comingSoon.map(book => createCarouselItem(book)).join('');
            
            // Add click events to carousel items
            document.querySelectorAll('.carousel-item').forEach(item => {
                item.addEventListener('click', function() {
                    const bookId = parseInt(this.getAttribute('data-id'));
                    openBookDetails(bookId);
                });
            });
        }

        // Create carousel item HTML
        function createCarouselItem(book) {
            return `
                <div class="carousel-item" data-id="${book.id}">
                    <div class="carousel-cover" style="background-image: url('${book.cover}')"></div>
                    <div class="carousel-info">
                        <h4 class="carousel-title">${book.title}</h4>
                        <p class="carousel-author">by ${book.author}</p>
                        <div class="carousel-price">
                            ${book.originalPrice ? 
                                `<span style="text-decoration: line-through; color: var(--text-light); margin-right: 5px;">$${book.originalPrice}</span>` : 
                                ''}
                            $${book.price}
                        </div>
                    </div>
                </div>
            `;
        }

        // Open book details modal
        function openBookDetails(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;
            
            const isFavorited = favorites.includes(book.id);
            const isInCart = cart.some(item => item.id === book.id);
            const isPurchased = purchasedBooks.some(item => item.id === book.id);
            
            bookDetailsContent.innerHTML = `
                <div class="book-details-cover" style="background-image: url('${book.cover}')"></div>
                <div class="book-details-info">
                    <h2 class="book-details-title">${book.title}</h2>
                    <p class="book-details-author">by ${book.author}</p>
                    <div class="rating-stars">
                        ${generateStarRating(book.rating)}
                        <span>${book.rating > 0 ? book.rating : 'Not rated'}</span>
                    </div>
                    <p class="book-details-description">${book.fullDescription}</p>
                    
                    <div class="book-details-meta">
                        <div>
                            <label>Category</label>
                            <span>${book.category.charAt(0).toUpperCase() + book.category.slice(1)}</span>
                        </div>
                        <div>
                            <label>Pages</label>
                            <span>${book.pages}</span>
                        </div>
                        <div>
                            <label>Published</label>
                            <span>${book.year}</span>
                        </div>
                        <div>
                            <label>Price</label>
                            <span>
                                ${book.originalPrice ? 
                                    `<span style="text-decoration: line-through; color: var(--text-light); margin-right: 5px;">$${book.originalPrice}</span>` : 
                                    ''}
                                $${book.price}
                                ${book.originalPrice ? 
                                    `<span class="discount-badge">${book.discount}% OFF</span>` : 
                                    ''}
                            </span>
                        </div>
                    </div>
                    
                    <div class="book-actions-row">
                        ${isPurchased ? 
                            `<button class="read-btn btn-enhanced" onclick="readBook(${book.id})">
                                <i class="fas fa-book-open"></i> Read Book
                            </button>` :
                            `<button class="borrow-btn btn-enhanced ${isInCart ? 'purchased' : ''}" 
                                onclick="addToCart(${book.id}); closeModal(bookDetailsModal);" 
                                ${book.isComingSoon ? 'disabled' : ''}
                                style="flex: 1;">
                                <i class="fas ${isInCart ? 'fa-check' : 'fa-shopping-cart'}"></i>
                                ${isInCart ? 'In Cart' : book.isComingSoon ? 'Pre-Order' : 'Add to Cart'}
                            </button>`
                        }
                        <button class="favorite-btn ${isFavorited ? 'active' : ''}" onclick="toggleFavorite(${book.id})" 
                            style="flex: 1; padding: 10px; background: ${isFavorited ? 'var(--accent)' : '#f8f9fa'}; color: ${isFavorited ? 'white' : '#333'}; border: 1px solid #ddd; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-heart"></i> ${isFavorited ? 'Favorited' : 'Add to Favorites'}
                        </button>
                    </div>
                </div>
            `;
            
            bookDetailsModal.style.display = 'flex';
            setTimeout(() => {
                bookDetailsModal.classList.add('show');
            }, 10);
        }

        // Read book
        function readBook(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;
            
            currentReadingBook = book;
            currentPage = 1;
            
            // Update reader UI
            readerTitle.textContent = book.title;
            updateReaderContent();
            
            // Show reader modal
            readBookModal.style.display = 'flex';
            setTimeout(() => {
                readBookModal.classList.add('show');
            }, 10);
        }

        // Update reader content based on current page
        function updateReaderContent() {
            if (!currentReadingBook) return;
            
            const content = currentReadingBook.content;
            totalPagesElement.textContent = content.length;
            currentPageElement.textContent = currentPage;
            
            // Update page content
            readerContent.innerHTML = `<p>${content[currentPage - 1]}</p>`;
            
            // Update button states
            prevPage.disabled = currentPage === 1;
            nextPage.disabled = currentPage === content.length;
        }

        // Go to previous page
        function goToPreviousPage() {
            if (currentPage > 1) {
                currentPage--;
                updateReaderContent();
            }
        }

        // Go to next page
        function goToNextPage() {
            if (currentPage < currentReadingBook.content.length) {
                currentPage++;
                updateReaderContent();
            }
        }

        // Decrease font size
        function decreaseFontSize() {
            const currentSize = parseInt(window.getComputedStyle(readerContent).fontSize);
            if (currentSize > 14) {
                readerContent.style.fontSize = (currentSize - 2) + 'px';
            }
        }

        // Increase font size
        function increaseFontSize() {
            const currentSize = parseInt(window.getComputedStyle(readerContent).fontSize);
            if (currentSize < 24) {
                readerContent.style.fontSize = (currentSize + 2) + 'px';
            }
        }

        // Add book to cart with enhanced transition
        function addToCart(bookId) {
            const book = books.find(b => b.id === bookId);
            if (!book) return;
            
            // Check if book is already in cart
            if (cart.some(item => item.id === bookId)) {
                showToast('Book is already in your cart', 'error');
                return;
            }
            
            // Add to cart
            cart.push({...book, quantity: 1});
            updateCart();
            saveUserData();
            showToast(`"${book.title}" added to cart!`);
            
            // Update book display
            displayBooks();
        }

        // Remove book from cart with enhanced transition
        function removeFromCart(bookId) {
            showConfirmation(
                'Remove from Cart',
                'Are you sure you want to remove this book from your cart?',
                function() {
                    const cartItem = document.querySelector(`.cart-item[data-id="${bookId}"]`);
                    if (cartItem) {
                        cartItem.classList.add('removing');
                        setTimeout(() => {
                            cart = cart.filter(item => item.id !== bookId);
                            updateCart();
                            saveUserData();
                            showToast('Book removed from cart');
                            
                            // Update book display
                            displayBooks();
                        }, 300);
                    }
                }
            );
        }

        // Update cart UI
        function updateCart() {
            // Update cart count
            cartCount.textContent = cart.length;
            
            // Update cart items
            if (cart.length === 0) {
                cartItems.innerHTML = '<p style="text-align: center; padding: 20px;">Your cart is empty</p>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item" data-id="${item.id}">
                        <div class="cart-item-cover" style="background-image: url('${item.cover}')"></div>
                        <div class="cart-item-details">
                            <h4 class="cart-item-title">${item.title}</h4>
                            <p class="cart-item-author">by ${item.author}</p>
                            <div class="cart-item-price">
                                ${item.originalPrice ? 
                                    `<span style="text-decoration: line-through; color: var(--text-light); margin-right: 5px;">$${item.originalPrice}</span>` : 
                                    ''}
                                $${item.price}
                            </div>
                            <div class="cart-item-actions">
                                <button class="remove-btn" onclick="removeFromCart(${item.id})">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
            
            // Update cart summary
            const subtotal = cart.reduce((sum, item) => sum + item.price, 0);
            const tax = subtotal * 0.1; // 10% tax
            const discount = subtotal >= 50 ? subtotal * 0.1 : 0; // 10% discount for orders over $50
            const total = subtotal + tax - discount;
            
            cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            cartTax.textContent = `$${tax.toFixed(2)}`;
            cartDiscount.textContent = `$${discount.toFixed(2)}`;
            cartTotal.textContent = `$${total.toFixed(2)}`;
        }

        // Toggle favorite status
        function toggleFavorite(bookId) {
            if (!currentUser) {
                showToast('Please sign in to add favorites', 'error');
                openAuthModal();
                return;
            }
            
            const index = favorites.indexOf(bookId);
            if (index === -1) {
                favorites.push(bookId);
                showToast('Book added to favorites!');
            } else {
                favorites.splice(index, 1);
                showToast('Book removed from favorites');
            }
            
            saveUserData();
            
            // Update book display
            displayBooks();
            
            // Update favorites in dashboard if visible
            if (dashboard.style.display === 'block') {
                updateDashboard();
            }
        }

        // Remove from favorites
        function removeFromFavorites(bookId) {
            showConfirmation(
                'Remove from Favorites',
                'Are you sure you want to remove this book from your favorites?',
                function() {
                    const index = favorites.indexOf(bookId);
                    if (index !== -1) {
                        favorites.splice(index, 1);
                        saveUserData();
                        showToast('Book removed from favorites');
                        
                        // Update favorites display
                        if (dashboard.style.display === 'block') {
                            updateDashboard();
                        }
                    }
                }
            );
        }

        // Show main content
        function showMainContent() {
            mainContent.style.display = 'block';
            cartSection.style.display = 'none';
            dashboard.style.display = 'none';
            ordersSection.style.display = 'none';
            trace.style.display = 'block';
            traceCurrent.textContent = 'All Books';
        }

        // Show cart
        function showCart() {
            mainContent.style.display = 'none';
            cartSection.style.display = 'block';
            dashboard.style.display = 'none';
            ordersSection.style.display = 'none';
            trace.style.display = 'block';
            traceCurrent.textContent = 'Cart';
        }

        // Show orders
        function showOrders() {
            if (!currentUser) {
                showToast('Please sign in to view orders', 'error');
                openAuthModal();
                return;
            }
            
            mainContent.style.display = 'none';
            cartSection.style.display = 'none';
            dashboard.style.display = 'none';
            ordersSection.style.display = 'block';
            trace.style.display = 'block';
            traceCurrent.textContent = 'Orders';
            displayOrders();
        }

        // Show favorites
        function showFavorites() {
            if (!currentUser) {
                showToast('Please sign in to view favorites', 'error');
                openAuthModal();
                return;
            }
            
            mainContent.style.display = 'none';
            cartSection.style.display = 'none';
            dashboard.style.display = 'block';
            ordersSection.style.display = 'none';
            trace.style.display = 'block';
            traceCurrent.textContent = 'Favorites';
            updateDashboard();
        }

        // Show dashboard
        function showDashboard() {
            if (!currentUser) {
                showToast('Please sign in to view dashboard', 'error');
                openAuthModal();
                return;
            }
            
            mainContent.style.display = 'none';
            cartSection.style.display = 'none';
            dashboard.style.display = 'block';
            ordersSection.style.display = 'none';
            trace.style.display = 'block';
            traceCurrent.textContent = 'Dashboard';
            updateDashboard();
        }

        // Update dashboard
        function updateDashboard() {
            // Update stats
            purchasedCount.textContent = purchasedBooks.length;
            favoritesCount.textContent = favorites.length;
            readingTime.textContent = `${purchasedBooks.length * 5}h`; // Simulated reading time
            pointsEarned.textContent = purchasedBooks.length * 10; // Simulated points
            
            // Update purchased books
            const purchasedBooksToShow = books.filter(book => 
                purchasedBooks.some(purchased => purchased.id === book.id)
            );
            
            purchasedBooksGrid.innerHTML = purchasedBooksToShow.length > 0 
                ? purchasedBooksToShow.map(book => createDashboardBookCard(book)).join('')
                : '<p style="text-align: center; padding: 20px;">You have no purchased books yet.</p>';
            
            // Update favorites
            const favoriteBooks = books.filter(book => favorites.includes(book.id));
            favoritesGrid.innerHTML = favoriteBooks.length > 0
                ? favoriteBooks.map(book => createDashboardFavoriteCard(book)).join('')
                : '<p style="text-align: center; padding: 20px;">You have no favorite books yet.</p>';
        }

        // Create dashboard book card with read option
        function createDashboardBookCard(book) {
            const isPurchased = purchasedBooks.some(item => item.id === book.id);
            
            return `
                <div class="book-card fade-in" data-id="${book.id}">
                    ${book.isComingSoon ? '<div class="category-tag" style="background: var(--purple);">Coming Soon</div>' : 
                      book.isBestseller ? '<div class="category-tag" style="background: var(--warning);">Bestseller</div>' : 
                      book.isNew ? '<div class="category-tag" style="background: var(--success);">New</div>' : 
                      `<div class="category-tag">${book.category.charAt(0).toUpperCase() + book.category.slice(1)}</div>`}
                    <div class="book-cover" style="background-image: url('${book.cover}')"></div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">by ${book.author}</p>
                        <div class="rating-stars">
                            ${generateStarRating(book.rating)}
                            <span>${book.rating > 0 ? book.rating : 'Not rated'}</span>
                        </div>
                        <div class="book-meta">
                            <span><i class="fas fa-book"></i> ${book.pages} pages</span>
                            <span>${book.year}</span>
                        </div>
                        <div class="book-actions">
                            ${isPurchased ? 
                                `<button class="read-btn btn-enhanced" onclick="readBook(${book.id})" style="width: 100%;">
                                    <i class="fas fa-book-open"></i> Read Book
                                </button>` :
                                `<button class="borrow-btn btn-enhanced" onclick="addToCart(${book.id})">
                                    <i class="fas fa-shopping-cart"></i> Add to Cart
                                </button>`
                            }
                        </div>
                    </div>
                </div>
            `;
        }

        // Create dashboard favorite card with remove option
        function createDashboardFavoriteCard(book) {
            return `
                <div class="book-card fade-in" data-id="${book.id}">
                    <button class="favorite-remove-btn" onclick="removeFromFavorites(${book.id})">
                        <i class="fas fa-times"></i>
                    </button>
                    ${book.isComingSoon ? '<div class="category-tag" style="background: var(--purple);">Coming Soon</div>' : 
                      book.isBestseller ? '<div class="category-tag" style="background: var(--warning);">Bestseller</div>' : 
                      book.isNew ? '<div class="category-tag" style="background: var(--success);">New</div>' : 
                      `<div class="category-tag">${book.category.charAt(0).toUpperCase() + book.category.slice(1)}</div>`}
                    <div class="book-cover" style="background-image: url('${book.cover}')"></div>
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">by ${book.author}</p>
                        <div class="rating-stars">
                            ${generateStarRating(book.rating)}
                            <span>${book.rating > 0 ? book.rating : 'Not rated'}</span>
                        </div>
                        <div class="book-meta">
                            <span><i class="fas fa-book"></i> ${book.pages} pages</span>
                            <span>${book.year}</span>
                        </div>
                        <div class="book-actions">
                            <button class="borrow-btn btn-enhanced" onclick="addToCart(${book.id})">
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Checkout process
        function checkout() {
            if (cart.length === 0) {
                showToast('Your cart is empty', 'error');
                return;
            }
            
            // For demo purposes, we'll just use the first book in cart
            currentBookForPurchase = cart[0];
            
            // Update payment modal
            paymentBookTitle.textContent = cart.length === 1 ? 
                currentBookForPurchase.title : 
                `${cart.length} items`;
            
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            paymentBookPrice.textContent = total.toFixed(2);
            
            // Pre-fill user details if available
            if (userDetails.name) {
                document.getElementById('shippingName').value = userDetails.name;
                document.getElementById('shippingAddress').value = userDetails.address;
                document.getElementById('shippingCity').value = userDetails.city;
                document.getElementById('shippingState').value = userDetails.state;
                document.getElementById('shippingZip').value = userDetails.zip;
                document.getElementById('shippingPhone').value = userDetails.phone;
            }
            
            // Open payment modal
            paymentModal.style.display = 'flex';
            setTimeout(() => {
                paymentModal.classList.add('show');
            }, 10);
        }

        // Set active payment method
        function setActivePaymentMethod(method) {
            // Update payment methods
            paymentMethods.forEach(m => {
                m.classList.remove('active');
                if (m.getAttribute('data-method') === method) {
                    m.classList.add('active');
                }
            });
            
            // Update payment details
            paymentDetails.forEach(d => {
                d.classList.remove('active');
                if (d.id === `${method}Details`) {
                    d.classList.add('active');
                }
            });
        }

        // Process payment
        function processPayment() {
            // Get user details from form
            const name = document.getElementById('shippingName').value;
            const address = document.getElementById('shippingAddress').value;
            const city = document.getElementById('shippingCity').value;
            const state = document.getElementById('shippingState').value;
            const zip = document.getElementById('shippingZip').value;
            const phone = document.getElementById('shippingPhone').value;
            
            // Validate required fields
            if (!name || !address || !city || !state || !zip || !phone) {
                showToast('Please fill in all shipping information fields', 'error');
                return;
            }
            
            
            userDetails = { name, address, city, state, zip, phone };
            saveUserData();
            
           
            completePayment.innerHTML = '<div class="loading"></div>';
            completePayment.disabled = true;
            
         
            setTimeout(() => {
               
                const orderId = 'ORD-' + Date.now();
                const order = {
                    id: orderId,
                    items: [...cart],
                    total: cart.reduce((sum, item) => sum + item.price, 0),
                    date: new Date().toLocaleDateString(),
                    status: 'processing',
                    userDetails: {...userDetails}
                };
                
                orders.push(order);
                
               
                purchasedBooks = [...purchasedBooks, ...cart];
                
             
                cart = [];
                updateCart();
                saveUserData();
                
               
                checkAchievements();
                
                
                paymentModal.style.display = 'none';
                paymentModal.classList.remove('show');
                
              
                completePayment.innerHTML = 'Complete Purchase';
                completePayment.disabled = false;
                
             
                showToast('Payment successful! Your order has been placed.');
                
            
                showOrderConfirmation(orderId);
            }, 2000);
        }

       
        function showOrderConfirmation(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            const modalContent = `
                <div class="modal-header">
                    <h2>Order Confirmed!</h2>
                    <button class="close-modal">&times;</button>
                </div>
                <div style="padding: 25px;">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <i class="fas fa-check-circle" style="font-size: 4rem; color: var(--success); margin-bottom: 15px;"></i>
                        <h3 style="color: var(--success); margin-bottom: 10px;">Thank You for Your Purchase!</h3>
                        <p>Your order has been confirmed and is being processed.</p>
                    </div>
                    
                    <div class="user-details">
                        <h4>Shipping Information</h4>
                        <div class="user-details-grid">
                            <div class="user-detail-item">
                                <span class="user-detail-label">Name</span>
                                <span class="user-detail-value">${order.userDetails.name}</span>
                            </div>
                            <div class="user-detail-item">
                                <span class="user-detail-label">Address</span>
                                <span class="user-detail-value">${order.userDetails.address}</span>
                            </div>
                            <div class="user-detail-item">
                                <span class="user-detail-label">City</span>
                                <span class="user-detail-value">${order.userDetails.city}</span>
                            </div>
                            <div class="user-detail-item">
                                <span class="user-detail-label">State</span>
                                <span class="user-detail-value">${order.userDetails.state}</span>
                            </div>
                            <div class="user-detail-item">
                                <span class="user-detail-label">ZIP Code</span>
                                <span class="user-detail-value">${order.userDetails.zip}</span>
                            </div>
                            <div class="user-detail-item">
                                <span class="user-detail-label">Phone</span>
                                <span class="user-detail-value">${order.userDetails.phone}</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                        <h4 style="margin-bottom: 15px;">Order Details</h4>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Order Number:</span>
                            <strong>${order.id}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Order Date:</span>
                            <strong>${order.date}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Total Amount:</span>
                            <strong>$${order.total.toFixed(2)}</strong>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; border-radius: 10px; padding: 20px; margin-bottom: 25px;">
                        <h4 style="margin-bottom: 15px;">Purchased Books</h4>
                        ${order.items.map(item => `
                            <div style="display: flex; gap: 15px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #ddd;">
                                <div style="width: 50px; height: 70px; background-image: url('${item.cover}'); background-size: cover; background-position: center; border-radius: 5px;"></div>
                                <div>
                                    <div style="font-weight: 600;">${item.title}</div>
                                    <div style="color: var(--text-light); font-size: 0.9rem;">by ${item.author}</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="borrow-btn btn-enhanced" onclick="closeModal(this.closest('.modal')); openOrderTracking('${order.id}')" style="width: auto; padding: 12px 25px;">
                            <i class="fas fa-shipping-fast"></i> Track Your Order
                        </button>
                    </div>
                </div>
            `;
            
            showCustomModal(modalContent);
        }

      
        function openOrderTracking(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;
            
            
            let activeStep = 1;
            if (order.status === 'processing') activeStep = 2;
            else if (order.status === 'shipped') activeStep = 3;
            else if (order.status === 'out-for-delivery') activeStep = 4;
            else if (order.status === 'delivered') activeStep = 5;
            
            orderTrackingContent.innerHTML = `
                <h3>Order #${order.id}</h3>
                <p>Estimated delivery: <strong>${order.status === 'delivered' ? 'Delivered on ' + order.date : 'Tomorrow, 2:00 PM - 5:00 PM'}</strong></p>
                
                <div class="tracking-steps">
                    <div class="tracking-step">
                        <div class="step-icon ${activeStep >= 1 ? 'active' : ''}"><i class="fas ${activeStep >= 1 ? 'fa-check' : 'fa-shopping-cart'}"></i></div>
                        <div class="step-label ${activeStep >= 1 ? 'active' : ''}">Order Placed</div>
                    </div>
                    <div class="tracking-step">
                        <div class="step-icon ${activeStep >= 2 ? 'active' : ''}"><i class="fas ${activeStep >= 2 ? 'fa-check' : 'fa-cog'}"></i></div>
                        <div class="step-label ${activeStep >= 2 ? 'active' : ''}">Processing</div>
                    </div>
                    <div class="tracking-step">
                        <div class="step-icon ${activeStep >= 3 ? 'active' : ''}"><i class="fas ${activeStep >= 3 ? 'fa-check' : 'fa-shipping-fast'}"></i></div>
                        <div class="step-label ${activeStep >= 3 ? 'active' : ''}">Shipped</div>
                    </div>
                    <div class="tracking-step">
                        <div class="step-icon ${activeStep >= 4 ? 'active' : ''}"><i class="fas ${activeStep >= 4 ? 'fa-check' : 'fa-box'}"></i></div>
                        <div class="step-label ${activeStep >= 4 ? 'active' : ''}">Out for Delivery</div>
                    </div>
                    <div class="tracking-step">
                        <div class="step-icon ${activeStep >= 5 ? 'active' : ''}"><i class="fas ${activeStep >= 5 ? 'fa-check' : 'fa-home'}"></i></div>
                        <div class="step-label ${activeStep >= 5 ? 'active' : ''}">Delivered</div>
                    </div>
                </div>
                
                <div class="tracking-map">
                    <div class="map-marker" style="top: 30%; left: 20%;"></div>
                    <div class="map-marker" style="top: 70%; left: 80%;"></div>
                    <p>${order.status === 'delivered' ? 'Your order has been delivered successfully!' : 'Live tracking: Your order is currently at the distribution center'}</p>
                </div>
                
                <div class="user-details">
                    <h4>Customer Information</h4>
                    <div class="user-details-grid">
                        <div class="user-detail-item">
                            <span class="user-detail-label">Name</span>
                            <span class="user-detail-value">${order.userDetails.name}</span>
                        </div>
                        <div class="user-detail-item">
                            <span class="user-detail-label">Address</span>
                            <span class="user-detail-value">${order.userDetails.address}</span>
                        </div>
                        <div class="user-detail-item">
                            <span class="user-detail-label">City</span>
                            <span class="user-detail-value">${order.userDetails.city}</span>
                        </div>
                        <div class="user-detail-item">
                            <span class="user-detail-label">State</span>
                            <span class="user-detail-value">${order.userDetails.state}</span>
                        </div>
                        <div class="user-detail-item">
                            <span class="user-detail-label">ZIP Code</span>
                            <span class="user-detail-value">${order.userDetails.zip}</span>
                        </div>
                        <div class="user-detail-item">
                            <span class="user-detail-label">Phone</span>
                            <span class="user-detail-value">${order.userDetails.phone}</span>
                        </div>
                    </div>
                </div>
                
                <div class="order-details">
                    <h4>Order Details</h4>
                    ${order.items.map(item => `
                        <div class="order-item">
                            <div class="order-item-cover" style="background-image: url('${item.cover}')"></div>
                            <div class="order-item-info">
                                <div class="order-item-title">${item.title}</div>
                                <div class="order-item-author">by ${item.author}</div>
                                <div class="order-item-price">$${item.price}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                ${order.status !== 'delivered' ? `
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="cancel-order-btn" onclick="cancelOrder('${order.id}')">
                            <i class="fas fa-times"></i> Cancel Order
                        </button>
                    </div>
                ` : ''}
            `;
            
            orderTrackingModal.style.display = 'flex';
            setTimeout(() => {
                orderTrackingModal.classList.add('show');
            }, 10);
        }

        
        function cancelOrder(orderId) {
            showConfirmation(
                'Cancel Order',
                'Are you sure you want to cancel this order? This action cannot be undone.',
                function() {
                    const order = orders.find(o => o.id === orderId);
                    if (order && order.status !== 'delivered') {
                        order.status = 'cancelled';
                        showToast('Order has been cancelled');
                        closeModal(orderTrackingModal);
                        displayOrders();
                    }
                }
            );
        }

       
        function createSampleOrders() {
            orders = [
                {
                    id: 'ORD-2023-001',
                    items: [books[0], books[1]],
                    total: 27.98,
                    date: '2023-10-15',
                    status: 'delivered',
                    userDetails: {
                        name: 'John Doe',
                        address: '123 Main Street',
                        city: 'New York',
                        state: 'NY',
                        zip: '10001',
                        phone: '(555) 123-4567'
                    }
                },
                {
                    id: 'ORD-2023-002',
                    items: [books[4]],
                    total: 13.49,
                    date: '2023-10-10',
                    status: 'delivered',
                    userDetails: {
                        name: 'John Doe',
                        address: '123 Main Street',
                        city: 'New York',
                        state: 'NY',
                        zip: '10001',
                        phone: '(555) 123-4567'
                    }
                },
                {
                    id: 'ORD-2023-003',
                    items: [books[2], books[5]],
                    total: 30.48,
                    date: '2023-11-05',
                    status: 'shipped',
                    userDetails: {
                        name: 'John Doe',
                        address: '123 Main Street',
                        city: 'New York',
                        state: 'NY',
                        zip: '10001',
                        phone: '(555) 123-4567'
                    }
                }
            ];
            
           
            purchasedBooks = [books[0], books[1], books[4]];
            
          
            checkAchievements();
        }

        function displayOrders() {
            const activeOrdersList = orders.filter(order => order.status !== 'delivered' && order.status !== 'cancelled');
            const orderHistoryList = orders.filter(order => order.status === 'delivered' || order.status === 'cancelled');
            
          
            if (activeOrdersList.length > 0) {
                activeOrders.innerHTML = activeOrdersList.map(order => `
                    <div class="order-item" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4>Order #${order.id}</h4>
                                <p>Placed on ${order.date} | Status: <span style="color: var(--secondary);">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></p>
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="borrow-btn btn-enhanced" onclick="openOrderTracking('${order.id}')" style="width: auto; padding: 8px 15px;">
                                    Track Order
                                </button>
                                ${order.status !== 'delivered' ? `
                                    <button class="cancel-order-btn" onclick="cancelOrder('${order.id}')" style="width: auto; padding: 8px 15px;">
                                        Cancel
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                activeOrders.innerHTML = '<p style="text-align: center; padding: 20px;">No active orders</p>';
            }
            
         
            if (orderHistoryList.length > 0) {
                orderHistory.innerHTML = orderHistoryList.map(order => `
                    <div class="order-item" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h4>Order #${order.id}</h4>
                                <p>Placed on ${order.date} | Status: <span style="color: ${order.status === 'delivered' ? 'var(--success)' : 'var(--danger)'};">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></p>
                            </div>
                            <button class="borrow-btn btn-enhanced" onclick="openOrderTracking('${order.id}')" style="width: auto; padding: 8px 15px;">
                                View Details
                            </button>
                        </div>
                    </div>
                `).join('');
            } else {
                orderHistory.innerHTML = '<p style="text-align: center; padding: 20px;">No order history</p>';
            }
        }

      
        function openAuthModal() {
            authModal.style.display = 'flex';
            setTimeout(() => {
                authModal.classList.add('show');
            }, 10);
        }

      
        function handleSearch() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            if (searchTerm === '') {
                displayBooks();
                return;
            }
            
            const filteredBooks = books.filter(book => 
                book.title.toLowerCase().includes(searchTerm) || 
                book.author.toLowerCase().includes(searchTerm) ||
                book.category.toLowerCase().includes(searchTerm)
            );
            
            booksGrid.innerHTML = filteredBooks.map(book => createBookCard(book)).join('');
        }

       
        function closeModal(modal) {
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
        }

      
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.className = 'toast';
            toast.classList.add(type);
            toast.classList.add('show');
            
          
            if (type === 'error') {
                toastIcon.className = 'fas fa-exclamation-circle';
            } else if (type === 'info') {
                toastIcon.className = 'fas fa-info-circle';
            } else {
                toastIcon.className = 'fas fa-check-circle';
            }
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

      
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>